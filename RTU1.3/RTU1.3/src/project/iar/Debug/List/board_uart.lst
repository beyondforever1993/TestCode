###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.6.4896/W32 for ARM      26/Mar/2017  12:36:36 #
# Copyright 1999-2013 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  D:\wangfan2\桌面\RTU_1.2\bsp\board_uart.c                #
#    Command line =  D:\wangfan2\桌面\RTU_1.2\bsp\board_uart.c -lCN           #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\Debug\List\ -o      #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\Debug\Obj\          #
#                    --no_cse --no_unroll --no_inline --no_code_motion        #
#                    --no_tbaa --no_clustering --no_scheduling --debug        #
#                    --endian=little --cpu=Cortex-M3 -e --fpu=None            #
#                    --dlib_config "C:\Program Files (x86)\IAR                #
#                    Systems\Embedded Workbench 6.5_2\arm\INC\c\DLib_Config_F #
#                    ull.h" -I D:\wangfan2\桌面\RTU_1.2\project\iar\ -I       #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\ -I       #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\ADC\ -I   #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\RTC\ -I   #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\TILT\ -I  #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\RDLevel\  #
#                    -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\RS232\ #
#                     -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\OS-v2 #
#                    \ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\BSP\Vibr #
#                    ationString\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\ #
#                    ..\ucos2\uCOS-II\Ports\ARM-Cortex-M3\Generic\IAR\ -I     #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\ucos2\uCOS-II #
#                    \Source\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\u #
#                    cos2\uC-LIB\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\ #
#                    ..\ucos2\uC-CPU\ -I D:\wangfan2\桌面\RTU_1.2\project\iar #
#                    \..\..\ucos2\uC-CPU\ARM-Cortex-M3\IAR\ -I                #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\cmsis\Drivers #
#                    \source\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\c #
#                    msis\Drivers\include\ -I D:\wangfan2\桌面\RTU_1.2\projec #
#                    t\iar\..\..\app\ -I D:\wangfan2\桌面\RTU_1.2\project\iar #
#                    \..\..\uC-Probe\Target\Plugins\uCOS-II\ -I               #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\uC-Probe\Targ #
#                    et\Demos\Intro\Workspaces\ -I                            #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\uC-Probe\Targ #
#                    et\Demos\Intro\Source\ -I D:\wangfan2\桌面\RTU_1.2\proje #
#                    ct\iar\..\..\uC-Probe\Target\Communication\Generic\Sourc #
#                    e\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\uC-Prob #
#                    e\Target\Communication\Generic\RS-232\Source\ -I         #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\uC-Probe\Targ #
#                    et\Communication\Generic\RS-232\Ports\NXP\LPC17xx\ -I    #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\uC-Probe\Targ #
#                    et\Communication\Generic\RS-232\OS\uCOS-II\ -I           #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\cmsis\Core\CM #
#                    3\CoreSupport\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\. #
#                    .\..\cmsis\Core\CM3\DeviceSupport\NXP\LPC177x_8x\ -I     #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\HuaceApp\ -I  #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\HuaceApp\DEVI #
#                    CE_BT\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\Hua #
#                    ceApp\DEVICE_COM\ -I D:\wangfan2\桌面\RTU_1.2\project\ia #
#                    r\..\..\HuaceApp\DEVICE_GPRS\ -I                         #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\HuaceApp\DEVI #
#                    CE_GPS\ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\Hu #
#                    aceApp\DEVICE_RADIO\ -I D:\wangfan2\桌面\RTU_1.2\project #
#                    \iar\..\..\HuaceApp\iap\ -I                              #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\FatFs\ -I     #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\USB\ -I       #
#                    D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\bsp\spi_flash #
#                    \ -I D:\wangfan2\桌面\RTU_1.2\project\iar\..\..\HuaceApp #
#                    \LED\ -On --use_c++_inline                               #
#    List file    =  D:\wangfan2\桌面\RTU_1.2\project\iar\Debug\List\board_ua #
#                    rt.lst                                                   #
#    Object file  =  D:\wangfan2\桌面\RTU_1.2\project\iar\Debug\Obj\board_uar #
#                    t.o                                                      #
#                                                                             #
#                                                                             #
###############################################################################

D:\wangfan2\桌面\RTU_1.2\bsp\board_uart.c
      1          /***********************************************************************//**
      2          * @file		board_uart.c
      3          * @purpose		This example describes how to use uart
      4          * 			  	
      5          * @version		1.0
      6          * @date		18. September. 2010
      7          * @author		NXP MCU SW Application Team
      8          *---------------------------------------------------------------------
      9          * Software that is described herein is for illustrative purposes only
     10          * which provides customers with programming information regarding the
     11          * products. This software is supplied "AS IS" without any warranties.
     12          * NXP Semiconductors assumes no responsibility or liability for the
     13          * use of the software, conveys no license or title under any patent,
     14          * copyright, or mask work right to the product. NXP Semiconductors
     15          * reserves the right to make changes in the software without
     16          * notification. NXP Semiconductors also make no representation or
     17          * warranty that such application will be suitable for the specified
     18          * use without further testing or modification.
     19          **********************************************************************/
     20          #include "includes.h"

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_EnableIRQ(IRQn_Type)
   \                     NVIC_EnableIRQ:
   \   00000000   0xB410             PUSH     {R4}
   \   00000002   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   00000004   0x0941             LSRS     R1,R0,#+5
   \   00000006   0x.... 0x....      LDR.W    R2,??DataTable11  ;; 0xe000e100
   \   0000000A   0x2301             MOVS     R3,#+1
   \   0000000C   0xF010 0x041F      ANDS     R4,R0,#0x1F
   \   00000010   0x40A3             LSLS     R3,R3,R4
   \   00000012   0xF842 0x3021      STR      R3,[R2, R1, LSL #+2]
   \   00000016   0xBC10             POP      {R4}
   \   00000018   0x4770             BX       LR               ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_SetPriority(IRQn_Type, uint32_t)
   \                     NVIC_SetPriority:
   \   00000000   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   00000002   0x2800             CMP      R0,#+0
   \   00000004   0xD509             BPL.N    ??NVIC_SetPriority_0
   \   00000006   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   00000008   0xF010 0x020F      ANDS     R2,R0,#0xF
   \   0000000C   0x.... 0x....      LDR.W    R3,??DataTable11_1  ;; 0xe000ed18
   \   00000010   0x18D2             ADDS     R2,R2,R3
   \   00000012   0x00CB             LSLS     R3,R1,#+3
   \   00000014   0xF802 0x3C04      STRB     R3,[R2, #-4]
   \   00000018   0xE004             B.N      ??NVIC_SetPriority_1
   \                     ??NVIC_SetPriority_0:
   \   0000001A   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   0000001C   0x.... 0x....      LDR.W    R2,??DataTable11_2  ;; 0xe000e400
   \   00000020   0x00CB             LSLS     R3,R1,#+3
   \   00000022   0x5483             STRB     R3,[R0, R2]
   \                     ??NVIC_SetPriority_1:
   \   00000024   0x4770             BX       LR               ;; return
     21          
     22          #define  BSP_SER_REG_U0_BASE_ADDR                ((CPU_INT32U)0x4000C000)
     23          #define  BSP_SER_REG_U1_BASE_ADDR                ((CPU_INT32U)0x40010000)
     24          #define  BSP_SER_REG_U2_BASE_ADDR                ((CPU_INT32U)0x40098000)
     25          #define  BSP_SER_REG_U3_BASE_ADDR                ((CPU_INT32U)0x4009C000)
     26          #define  BSP_SER_REG_U4_BASE_ADDR                ((CPU_INT32U)0x400AC000)
     27          #define  BSP_SER_REG_U0_RBR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0000))
     28          #define  BSP_SER_REG_U0_THR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0000))
     29          #define  BSP_SER_REG_U0_DLL              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0000))
     30          #define  BSP_SER_REG_U0_DLM              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0004))
     31          #define  BSP_SER_REG_U0_IER              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0004))
     32          #define  BSP_SER_REG_U0_IIR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0008))
     33          #define  BSP_SER_REG_U0_FCR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0008))
     34          #define  BSP_SER_REG_U0_LCR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x000C))
     35          #define  BSP_SER_REG_U0_LSR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0014))
     36          #define  BSP_SER_REG_U0_FDR              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0028))
     37          #define  BSP_SER_REG_U0_TER              (*(CPU_REG32 *)(BSP_SER_REG_U0_BASE_ADDR + 0x0030))
     38          
     39          #define  BSP_SER_REG_U1_RBR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0000))
     40          #define  BSP_SER_REG_U1_THR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0000))
     41          #define  BSP_SER_REG_U1_DLL              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0000))
     42          #define  BSP_SER_REG_U1_DLM              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0004))
     43          #define  BSP_SER_REG_U1_IER              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0004))
     44          #define  BSP_SER_REG_U1_IIR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0008))
     45          #define  BSP_SER_REG_U1_FCR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0008))
     46          #define  BSP_SER_REG_U1_LCR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x000C))
     47          #define  BSP_SER_REG_U1_LSR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0014))
     48          #define  BSP_SER_REG_U1_FDR              (*(CPU_REG32 *)(BSP_SER_REG_U1_BASE_ADDR + 0x0028))
     49          #define  BSP_SER_REG_U2_RBR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0000))
     50          #define  BSP_SER_REG_U2_THR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0000))
     51          #define  BSP_SER_REG_U2_DLL              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0000))
     52          #define  BSP_SER_REG_U2_DLM              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0004))
     53          #define  BSP_SER_REG_U2_IER              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0004))
     54          #define  BSP_SER_REG_U2_IIR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0008))
     55          #define  BSP_SER_REG_U2_FCR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0008))
     56          #define  BSP_SER_REG_U2_LCR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x000C))
     57          #define  BSP_SER_REG_U2_LSR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0014))
     58          #define  BSP_SER_REG_U2_FDR              (*(CPU_REG32 *)(BSP_SER_REG_U2_BASE_ADDR + 0x0028))
     59          #define  BSP_SER_REG_U3_RBR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0000))
     60          #define  BSP_SER_REG_U3_THR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0000))
     61          #define  BSP_SER_REG_U3_DLL              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0000))
     62          #define  BSP_SER_REG_U3_DLM              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0004))
     63          #define  BSP_SER_REG_U3_IER              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0004))
     64          #define  BSP_SER_REG_U3_IIR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0008))
     65          #define  BSP_SER_REG_U3_FCR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0008))
     66          #define  BSP_SER_REG_U3_LCR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x000C))
     67          #define  BSP_SER_REG_U3_LSR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0014))
     68          #define  BSP_SER_REG_U3_FDR              (*(CPU_REG32 *)(BSP_SER_REG_U3_BASE_ADDR + 0x0028))
     69          #define  BSP_SER_U0_PINS                 (DEF_BIT_02 | DEF_BIT_03)
     70          #define  BSP_SER_U1_PINS                 (DEF_BIT_00 | DEF_BIT_01)//xf (DEF_BIT_15 | DEF_BIT_16)
     71          #define  BSP_SER_REG_U4_IIR              (*(CPU_REG32 *)(BSP_SER_REG_U4_BASE_ADDR + 0x0008))
     72          #define  BSP_SER_REG_U4_LSR              (*(CPU_REG32 *)(BSP_SER_REG_U4_BASE_ADDR + 0x0014))
     73          
     74          ///*

   \                                 In section .bss, align 4
     75          static  BSP_OS_SEM   BSP_Ser0TxWait;
   \                     BSP_Ser0TxWait:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     76          static  BSP_OS_SEM   BSP_Ser0Lock;
   \                     BSP_Ser0Lock:
   \   00000000                      DS8 4
     77          //static  BSP_OS_SEM   BSP_Ser1TxWait;

   \                                 In section .bss, align 4
     78          static  BSP_OS_SEM   BSP_Ser1Lock;
   \                     BSP_Ser1Lock:
   \   00000000                      DS8 4
     79          //static  BSP_OS_SEM   BSP_Ser2TxWait;

   \                                 In section .bss, align 4
     80          static  BSP_OS_SEM   BSP_Ser2Lock;
   \                     BSP_Ser2Lock:
   \   00000000                      DS8 4
     81          //static  BSP_OS_SEM   BSP_Ser3TxWait;

   \                                 In section .bss, align 4
     82          static  BSP_OS_SEM   BSP_Ser3Lock;
   \                     BSP_Ser3Lock:
   \   00000000                      DS8 4
     83          //*/
     84          #define BUFFNUM1 1024
     85          //UART0 串口数据发送相关变量定义

   \                                 In section .bss, align 4
     86          unsigned char bSendBufferForReceiver[BUFFNUM1];
   \                     bSendBufferForReceiver:
   \   00000000                      DS8 1024

   \                                 In section .bss, align 2
     87          unsigned short wpSendToReceiverOut = 0;
   \                     wpSendToReceiverOut:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     88          unsigned short wpSendToReceiverIn = 0;
   \                     wpSendToReceiverIn:
   \   00000000                      DS8 2

   \                                 In section .data, align 4
     89          BOOL CmcCommandEmpty = TRUE;
   \                     CmcCommandEmpty:
   \   00000000   0x00000001         DC32 1
     90          //UART2 GPS数据发送相关变量定义//add by xxw 20140730

   \                                 In section .bss, align 4
     91          unsigned char bSendBufferForReceiver_gps[BUFFNUM1];
   \                     bSendBufferForReceiver_gps:
   \   00000000                      DS8 1024

   \                                 In section .bss, align 2
     92          unsigned short wpSendToReceiverOut_gps = 0;
   \                     wpSendToReceiverOut_gps:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     93          unsigned short wpSendToReceiverIn_gps = 0;
   \                     wpSendToReceiverIn_gps:
   \   00000000                      DS8 2

   \                                 In section .data, align 4
     94          BOOL CmcCommandEmpty_gps = TRUE;
   \                     CmcCommandEmpty_gps:
   \   00000000   0x00000001         DC32 1
     95          //UART3 BT数据发送相关变量定义

   \                                 In section .bss, align 4
     96          unsigned char bSendBufferForReceiver_bt[BUFFNUM1];
   \                     bSendBufferForReceiver_bt:
   \   00000000                      DS8 1024

   \                                 In section .bss, align 2
     97          unsigned short wpSendToReceiverOut_bt = 0;
   \                     wpSendToReceiverOut_bt:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     98          unsigned short wpSendToReceiverIn_bt = 0;
   \                     wpSendToReceiverIn_bt:
   \   00000000                      DS8 2

   \                                 In section .data, align 4
     99          BOOL CmcCommandEmpty_bt = TRUE;
   \                     CmcCommandEmpty_bt:
   \   00000000   0x00000001         DC32 1
    100          //UART4 RADIO数据发送相关变量定义

   \                                 In section .bss, align 4
    101          unsigned char bSendBufferForReceiver_radio[BUFFNUM1];
   \                     bSendBufferForReceiver_radio:
   \   00000000                      DS8 1024

   \                                 In section .bss, align 2
    102          unsigned short wpSendToReceiverOut_radio = 0;
   \                     wpSendToReceiverOut_radio:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
    103          unsigned short wpSendToReceiverIn_radio = 0;
   \                     wpSendToReceiverIn_radio:
   \   00000000                      DS8 2

   \                                 In section .data, align 4
    104          BOOL CmcCommandEmpty_radio = TRUE;
   \                     CmcCommandEmpty_radio:
   \   00000000   0x00000001         DC32 1
    105          

   \                                 In section .bss, align 4
    106          BOOL hard_enter = FALSE;
   \                     hard_enter:
   \   00000000                      DS8 4

   \                                 In section .bss, align 1
    107          unsigned char task_current;
   \                     task_current:
   \   00000000                      DS8 1
    108          

   \                                 In section .text, align 2, keep-with-next
    109          void hard_fault_handler_c(unsigned int * hardfault_args)
    110          {
    111             while(1);
   \                     hard_fault_handler_c:
   \                     ??hard_fault_handler_c_0:
   \   00000000   0xE7FE             B.N      ??hard_fault_handler_c_0
    112          }
    113          

   \                                 In section .text, align 2, keep-with-next
    114          void UART0_IRQHandler (void)
    115          {
   \                     UART0_IRQHandler:
   \   00000000   0xB510             PUSH     {R4,LR}
    116            unsigned char  iir;
    117            //OS_CPU_SR  cpu_sr;
    118            //OS_ENTER_CRITICAL();
    119            //OSIntNesting++;
    120            //OS_EXIT_CRITICAL();
    121            iir = BSP_SER_REG_U0_IIR & 0x0F;
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable11_3  ;; 0x4000c008
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   0000000C   0x0004             MOVS     R4,R0
    122            while (iir != 1)
   \                     ??UART0_IRQHandler_0:
   \   0000000E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000010   0x2C01             CMP      R4,#+1
   \   00000012   0xD062             BEQ.N    ??UART0_IRQHandler_1
    123            {
    124              switch (iir)
   \   00000014   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000016   0x0020             MOVS     R0,R4
   \   00000018   0x2802             CMP      R0,#+2
   \   0000001A   0xD004             BEQ.N    ??UART0_IRQHandler_2
   \   0000001C   0x2804             CMP      R0,#+4
   \   0000001E   0xD032             BEQ.N    ??UART0_IRQHandler_3
   \   00000020   0x2806             CMP      R0,#+6
   \   00000022   0xD04E             BEQ.N    ??UART0_IRQHandler_4
   \   00000024   0xE052             B.N      ??UART0_IRQHandler_5
    125              {
    126              case  2:   //发送中
    127                //BSP_OS_SemPost(&BSP_Ser0TxWait);
    128                if(wpSendToReceiverOut == wpSendToReceiverIn){
   \                     ??UART0_IRQHandler_2:
   \   00000026   0x.... 0x....      LDR.W    R0,??DataTable11_4
   \   0000002A   0x8800             LDRH     R0,[R0, #+0]
   \   0000002C   0x.... 0x....      LDR.W    R1,??DataTable11_5
   \   00000030   0x8809             LDRH     R1,[R1, #+0]
   \   00000032   0x4288             CMP      R0,R1
   \   00000034   0xD10A             BNE.N    ??UART0_IRQHandler_6
    129          
    130                  CmcCommandEmpty = TRUE ;
   \   00000036   0x.... 0x....      LDR.W    R0,??DataTable11_6
   \   0000003A   0x2101             MOVS     R1,#+1
   \   0000003C   0x6001             STR      R1,[R0, #+0]
    131                  UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, DISABLE);
   \   0000003E   0x2200             MOVS     R2,#+0
   \   00000040   0x2101             MOVS     R1,#+1
   \   00000042   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   00000046   0x.... 0x....      BL       UART_IntConfig
   \   0000004A   0xE01B             B.N      ??UART0_IRQHandler_7
    132                }
    133                else{
    134                  LPC_UART0->THR = bSendBufferForReceiver[wpSendToReceiverOut];
   \                     ??UART0_IRQHandler_6:
   \   0000004C   0x.... 0x....      LDR.W    R0,??DataTable11_4
   \   00000050   0x8800             LDRH     R0,[R0, #+0]
   \   00000052   0x.... 0x....      LDR.W    R1,??DataTable11_8
   \   00000056   0x5C40             LDRB     R0,[R0, R1]
   \   00000058   0x.... 0x....      LDR.W    R1,??DataTable11_7  ;; 0x4000c000
   \   0000005C   0x7008             STRB     R0,[R1, #+0]
    135                  wpSendToReceiverOut++;
   \   0000005E   0x.... 0x....      LDR.W    R0,??DataTable11_4
   \   00000062   0x8800             LDRH     R0,[R0, #+0]
   \   00000064   0x1C40             ADDS     R0,R0,#+1
   \   00000066   0x.... 0x....      LDR.W    R1,??DataTable11_4
   \   0000006A   0x8008             STRH     R0,[R1, #+0]
    136                  wpSendToReceiverOut %= BUFFNUM1;
   \   0000006C   0x.... 0x....      LDR.W    R0,??DataTable11_4
   \   00000070   0x8800             LDRH     R0,[R0, #+0]
   \   00000072   0xF44F 0x6180      MOV      R1,#+1024
   \   00000076   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000007A   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   0000007E   0x.... 0x....      LDR.W    R0,??DataTable11_4
   \   00000082   0x8002             STRH     R2,[R0, #+0]
    137                }
    138                break;
   \                     ??UART0_IRQHandler_7:
   \   00000084   0xE022             B.N      ??UART0_IRQHandler_8
    139              case  4:   //接收中                                                                      */
    140                g_DeviceCOM.Buf[g_DeviceCOM.WrSp] = BSP_SER_REG_U0_RBR;
   \                     ??UART0_IRQHandler_3:
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable11_9
   \   0000008A   0x8B00             LDRH     R0,[R0, #+24]
   \   0000008C   0x.... 0x....      LDR.W    R1,??DataTable11_9
   \   00000090   0x6949             LDR      R1,[R1, #+20]
   \   00000092   0x.... 0x....      LDR.W    R2,??DataTable11_7  ;; 0x4000c000
   \   00000096   0x6812             LDR      R2,[R2, #+0]
   \   00000098   0x5442             STRB     R2,[R0, R1]
    141                INCREASE_POINTER(g_DeviceCOM.WrSp);
   \   0000009A   0x.... 0x....      LDR.W    R0,??DataTable11_9
   \   0000009E   0x8B00             LDRH     R0,[R0, #+24]
   \   000000A0   0x1C40             ADDS     R0,R0,#+1
   \   000000A2   0x.... 0x....      LDR.W    R1,??DataTable11_9
   \   000000A6   0x8308             STRH     R0,[R1, #+24]
   \   000000A8   0x.... 0x....      LDR.W    R0,??DataTable11_9
   \   000000AC   0x8B00             LDRH     R0,[R0, #+24]
   \   000000AE   0xF44F 0x6100      MOV      R1,#+2048
   \   000000B2   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000000B6   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000000BA   0x.... 0x....      LDR.W    R0,??DataTable11_9
   \   000000BE   0x8302             STRH     R2,[R0, #+24]
    142                //while(tt>5)
    143                //  tt--;
    144                break;
   \   000000C0   0xE004             B.N      ??UART0_IRQHandler_8
    145              case  6:
    146                iir = BSP_SER_REG_U0_LSR;
   \                     ??UART0_IRQHandler_4:
   \   000000C2   0x.... 0x....      LDR.W    R0,??DataTable11_10  ;; 0x4000c014
   \   000000C6   0x6800             LDR      R0,[R0, #+0]
   \   000000C8   0x0004             MOVS     R4,R0
    147                break;
   \   000000CA   0xE7FF             B.N      ??UART0_IRQHandler_8
    148              default:
    149                break;
    150              }
    151              iir = BSP_SER_REG_U0_IIR & 0x0F;
   \                     ??UART0_IRQHandler_5:
   \                     ??UART0_IRQHandler_8:
   \   000000CC   0x.... 0x....      LDR.W    R0,??DataTable11_3  ;; 0x4000c008
   \   000000D0   0x6800             LDR      R0,[R0, #+0]
   \   000000D2   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   000000D6   0x0004             MOVS     R4,R0
   \   000000D8   0xE799             B.N      ??UART0_IRQHandler_0
    152            }
    153            //OSIntExit();
    154          }
   \                     ??UART0_IRQHandler_1:
   \   000000DA   0xBD10             POP      {R4,PC}          ;; return
    155          

   \                                 In section .text, align 2, keep-with-next
    156          void  UART1_IRQHandler (void)
    157          {
    158            unsigned char  iir;
    159            iir = BSP_SER_REG_U1_IIR & 0x0F;
   \                     UART1_IRQHandler:
   \   00000000   0x.... 0x....      LDR.W    R1,??DataTable11_11  ;; 0x40010008
   \   00000004   0x6809             LDR      R1,[R1, #+0]
   \   00000006   0xF011 0x010F      ANDS     R1,R1,#0xF
   \   0000000A   0x0008             MOVS     R0,R1
    160            while (iir != 1)
   \                     ??UART1_IRQHandler_0:
   \   0000000C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000E   0x2801             CMP      R0,#+1
   \   00000010   0xD032             BEQ.N    ??UART1_IRQHandler_1
    161            {
    162              switch (iir)
   \   00000012   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000014   0x0001             MOVS     R1,R0
   \   00000016   0x2902             CMP      R1,#+2
   \   00000018   0xD004             BEQ.N    ??UART1_IRQHandler_2
   \   0000001A   0x2904             CMP      R1,#+4
   \   0000001C   0xD003             BEQ.N    ??UART1_IRQHandler_3
   \   0000001E   0x2906             CMP      R1,#+6
   \   00000020   0xD01E             BEQ.N    ??UART1_IRQHandler_4
   \   00000022   0xE022             B.N      ??UART1_IRQHandler_5
    163              {
    164              case  2:   //发送中
    165                //BSP_OS_SemPost(&BSP_Ser1TxWait);
    166                break;
   \                     ??UART1_IRQHandler_2:
   \   00000024   0xE021             B.N      ??UART1_IRQHandler_6
    167          
    168              case  4:   //接收中                                                                      */
    169                Module_Data_Buffer[Module_Data_WrSp] = BSP_SER_REG_U1_RBR; //edit by xhz 2011.8.31
   \                     ??UART1_IRQHandler_3:
   \   00000026   0x.... 0x....      LDR.W    R1,??DataTable11_12
   \   0000002A   0x8809             LDRH     R1,[R1, #+0]
   \   0000002C   0x.... 0x....      LDR.W    R2,??DataTable11_13
   \   00000030   0x.... 0x....      LDR.W    R3,??DataTable11_14  ;; 0x40010000
   \   00000034   0x681B             LDR      R3,[R3, #+0]
   \   00000036   0x548B             STRB     R3,[R1, R2]
    170                INCREASE_MOUDLE_DATA_POINTER(Module_Data_WrSp);
   \   00000038   0x.... 0x....      LDR.W    R1,??DataTable11_12
   \   0000003C   0x8809             LDRH     R1,[R1, #+0]
   \   0000003E   0x1C49             ADDS     R1,R1,#+1
   \   00000040   0x.... 0x....      LDR.W    R2,??DataTable11_12
   \   00000044   0x8011             STRH     R1,[R2, #+0]
   \   00000046   0x.... 0x....      LDR.W    R1,??DataTable11_12
   \   0000004A   0x8809             LDRH     R1,[R1, #+0]
   \   0000004C   0xF44F 0x6200      MOV      R2,#+2048
   \   00000050   0xFB91 0xF3F2      SDIV     R3,R1,R2
   \   00000054   0xFB03 0x1312      MLS      R3,R3,R2,R1
   \   00000058   0x.... 0x....      LDR.W    R1,??DataTable11_12
   \   0000005C   0x800B             STRH     R3,[R1, #+0]
    171                break;
   \   0000005E   0xE004             B.N      ??UART1_IRQHandler_6
    172              case  6:
    173                iir = BSP_SER_REG_U1_LSR;
   \                     ??UART1_IRQHandler_4:
   \   00000060   0x.... 0x....      LDR.W    R1,??DataTable11_15  ;; 0x40010014
   \   00000064   0x6809             LDR      R1,[R1, #+0]
   \   00000066   0x0008             MOVS     R0,R1
    174                break;
   \   00000068   0xE7FF             B.N      ??UART1_IRQHandler_6
    175              default:
    176                break;
    177              }
    178              iir = BSP_SER_REG_U1_IIR & 0x0F;
   \                     ??UART1_IRQHandler_5:
   \                     ??UART1_IRQHandler_6:
   \   0000006A   0x.... 0x....      LDR.W    R1,??DataTable11_11  ;; 0x40010008
   \   0000006E   0x6809             LDR      R1,[R1, #+0]
   \   00000070   0xF011 0x010F      ANDS     R1,R1,#0xF
   \   00000074   0x0008             MOVS     R0,R1
   \   00000076   0xE7C9             B.N      ??UART1_IRQHandler_0
    179            }
    180          }
   \                     ??UART1_IRQHandler_1:
   \   00000078   0x4770             BX       LR               ;; return
    181          

   \                                 In section .text, align 2, keep-with-next
    182          void  UART2_IRQHandler (void)
    183          {
   \                     UART2_IRQHandler:
   \   00000000   0xB510             PUSH     {R4,LR}
    184            unsigned char  iir;
    185            //unsigned char tmp;
    186            iir = BSP_SER_REG_U2_IIR & 0x0F;
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable11_16  ;; 0x40098008
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   0000000C   0x0004             MOVS     R4,R0
    187            while (iir != 1)
   \                     ??UART2_IRQHandler_0:
   \   0000000E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000010   0x2C01             CMP      R4,#+1
   \   00000012   0xD062             BEQ.N    ??UART2_IRQHandler_1
    188            {
    189              switch (iir)
   \   00000014   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000016   0x0020             MOVS     R0,R4
   \   00000018   0x2802             CMP      R0,#+2
   \   0000001A   0xD004             BEQ.N    ??UART2_IRQHandler_2
   \   0000001C   0x2804             CMP      R0,#+4
   \   0000001E   0xD032             BEQ.N    ??UART2_IRQHandler_3
   \   00000020   0x2806             CMP      R0,#+6
   \   00000022   0xD04E             BEQ.N    ??UART2_IRQHandler_4
   \   00000024   0xE052             B.N      ??UART2_IRQHandler_5
    190              {
    191              case  2:   //发送中
    192                //BSP_OS_SemPost(&BSP_Ser2TxWait);//add by xxw 20140730
    193                if(wpSendToReceiverOut_gps == wpSendToReceiverIn_gps)
   \                     ??UART2_IRQHandler_2:
   \   00000026   0x.... 0x....      LDR.W    R0,??DataTable11_17
   \   0000002A   0x8800             LDRH     R0,[R0, #+0]
   \   0000002C   0x.... 0x....      LDR.W    R1,??DataTable11_18
   \   00000030   0x8809             LDRH     R1,[R1, #+0]
   \   00000032   0x4288             CMP      R0,R1
   \   00000034   0xD10A             BNE.N    ??UART2_IRQHandler_6
    194                {
    195                  CmcCommandEmpty_gps = TRUE ;
   \   00000036   0x.... 0x....      LDR.W    R0,??DataTable11_19
   \   0000003A   0x2101             MOVS     R1,#+1
   \   0000003C   0x6001             STR      R1,[R0, #+0]
    196                  UART_IntConfig(LPC_UART2, UART_INTCFG_THRE, DISABLE);
   \   0000003E   0x2200             MOVS     R2,#+0
   \   00000040   0x2101             MOVS     R1,#+1
   \   00000042   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   00000046   0x.... 0x....      BL       UART_IntConfig
   \   0000004A   0xE01B             B.N      ??UART2_IRQHandler_7
    197                  //LPC_UART2->IER &= ((~UART_INTCFG_THRE) & UART_IER_BITMASK);
    198                }
    199                else
    200                {
    201                  LPC_UART2->THR = bSendBufferForReceiver_gps[wpSendToReceiverOut_gps];
   \                     ??UART2_IRQHandler_6:
   \   0000004C   0x.... 0x....      LDR.W    R0,??DataTable11_17
   \   00000050   0x8800             LDRH     R0,[R0, #+0]
   \   00000052   0x.... 0x....      LDR.W    R1,??DataTable11_21
   \   00000056   0x5C40             LDRB     R0,[R0, R1]
   \   00000058   0x.... 0x....      LDR.W    R1,??DataTable11_20  ;; 0x40098000
   \   0000005C   0x7008             STRB     R0,[R1, #+0]
    202                  wpSendToReceiverOut_gps++;
   \   0000005E   0x.... 0x....      LDR.W    R0,??DataTable11_17
   \   00000062   0x8800             LDRH     R0,[R0, #+0]
   \   00000064   0x1C40             ADDS     R0,R0,#+1
   \   00000066   0x.... 0x....      LDR.W    R1,??DataTable11_17
   \   0000006A   0x8008             STRH     R0,[R1, #+0]
    203                  wpSendToReceiverOut_gps %= BUFFNUM1;
   \   0000006C   0x.... 0x....      LDR.W    R0,??DataTable11_17
   \   00000070   0x8800             LDRH     R0,[R0, #+0]
   \   00000072   0xF44F 0x6180      MOV      R1,#+1024
   \   00000076   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000007A   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   0000007E   0x.... 0x....      LDR.W    R0,??DataTable11_17
   \   00000082   0x8002             STRH     R2,[R0, #+0]
    204                }
    205                break;
   \                     ??UART2_IRQHandler_7:
   \   00000084   0xE022             B.N      ??UART2_IRQHandler_8
    206              case  4:   //接收中
    207                if(1)// (Get_Sourcelist_Flag == 0)
    208                {
    209                  g_DeviceGPS.Buf[g_DeviceGPS.WrSp] = BSP_SER_REG_U2_RBR;
   \                     ??UART2_IRQHandler_3:
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable11_22
   \   0000008A   0x8B00             LDRH     R0,[R0, #+24]
   \   0000008C   0x.... 0x....      LDR.W    R1,??DataTable11_22
   \   00000090   0x6949             LDR      R1,[R1, #+20]
   \   00000092   0x.... 0x....      LDR.W    R2,??DataTable11_20  ;; 0x40098000
   \   00000096   0x6812             LDR      R2,[R2, #+0]
   \   00000098   0x5442             STRB     R2,[R0, R1]
    210                  INCREASE_POINTER(g_DeviceGPS.WrSp);
   \   0000009A   0x.... 0x....      LDR.W    R0,??DataTable11_22
   \   0000009E   0x8B00             LDRH     R0,[R0, #+24]
   \   000000A0   0x1C40             ADDS     R0,R0,#+1
   \   000000A2   0x.... 0x....      LDR.W    R1,??DataTable11_22
   \   000000A6   0x8308             STRH     R0,[R1, #+24]
   \   000000A8   0x.... 0x....      LDR.W    R0,??DataTable11_22
   \   000000AC   0x8B00             LDRH     R0,[R0, #+24]
   \   000000AE   0xF44F 0x6100      MOV      R1,#+2048
   \   000000B2   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000000B6   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000000BA   0x.... 0x....      LDR.W    R0,??DataTable11_22
   \   000000BE   0x8302             STRH     R2,[R0, #+24]
    211                }else{
    212                  //tmp = BSP_SER_REG_U2_RBR;//delete by xxw 20140815 消除警告
    213                }
    214                break;
   \   000000C0   0xE004             B.N      ??UART2_IRQHandler_8
    215              case  6:
    216                iir = BSP_SER_REG_U2_LSR;
   \                     ??UART2_IRQHandler_4:
   \   000000C2   0x.... 0x....      LDR.W    R0,??DataTable11_23  ;; 0x40098014
   \   000000C6   0x6800             LDR      R0,[R0, #+0]
   \   000000C8   0x0004             MOVS     R4,R0
    217                break;
   \   000000CA   0xE7FF             B.N      ??UART2_IRQHandler_8
    218              default:
    219                break;
    220              }
    221              iir = BSP_SER_REG_U2_IIR & 0x0F;
   \                     ??UART2_IRQHandler_5:
   \                     ??UART2_IRQHandler_8:
   \   000000CC   0x.... 0x....      LDR.W    R0,??DataTable11_16  ;; 0x40098008
   \   000000D0   0x6800             LDR      R0,[R0, #+0]
   \   000000D2   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   000000D6   0x0004             MOVS     R4,R0
   \   000000D8   0xE799             B.N      ??UART2_IRQHandler_0
    222            }
    223          }
   \                     ??UART2_IRQHandler_1:
   \   000000DA   0xBD10             POP      {R4,PC}          ;; return

   \                                 In section .text, align 2, keep-with-next
    224          void  UART3_IRQHandler (void)
    225          {
   \                     UART3_IRQHandler:
   \   00000000   0xB510             PUSH     {R4,LR}
    226            unsigned char  iir;
    227            iir = BSP_SER_REG_U3_IIR & 0x0F;
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable11_24  ;; 0x4009c008
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   0000000C   0x0004             MOVS     R4,R0
    228            while (iir != 1)
   \                     ??UART3_IRQHandler_0:
   \   0000000E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000010   0x2C01             CMP      R4,#+1
   \   00000012   0xD062             BEQ.N    ??UART3_IRQHandler_1
    229            {
    230              switch (iir)
   \   00000014   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000016   0x0020             MOVS     R0,R4
   \   00000018   0x2802             CMP      R0,#+2
   \   0000001A   0xD004             BEQ.N    ??UART3_IRQHandler_2
   \   0000001C   0x2804             CMP      R0,#+4
   \   0000001E   0xD032             BEQ.N    ??UART3_IRQHandler_3
   \   00000020   0x2806             CMP      R0,#+6
   \   00000022   0xD04E             BEQ.N    ??UART3_IRQHandler_4
   \   00000024   0xE052             B.N      ??UART3_IRQHandler_5
    231              {
    232              case  2:   //发送中
    233                //BSP_OS_SemPost(&BSP_Ser3TxWait);    //add by xxw 20140730
    234                if(wpSendToReceiverOut_bt == wpSendToReceiverIn_bt)
   \                     ??UART3_IRQHandler_2:
   \   00000026   0x.... 0x....      LDR.W    R0,??DataTable11_25
   \   0000002A   0x8800             LDRH     R0,[R0, #+0]
   \   0000002C   0x.... 0x....      LDR.W    R1,??DataTable11_26
   \   00000030   0x8809             LDRH     R1,[R1, #+0]
   \   00000032   0x4288             CMP      R0,R1
   \   00000034   0xD10A             BNE.N    ??UART3_IRQHandler_6
    235                {
    236                  CmcCommandEmpty_bt = TRUE ;
   \   00000036   0x.... 0x....      LDR.W    R0,??DataTable11_27
   \   0000003A   0x2101             MOVS     R1,#+1
   \   0000003C   0x6001             STR      R1,[R0, #+0]
    237                  UART_IntConfig(LPC_UART3, UART_INTCFG_THRE, DISABLE);
   \   0000003E   0x2200             MOVS     R2,#+0
   \   00000040   0x2101             MOVS     R1,#+1
   \   00000042   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   00000046   0x.... 0x....      BL       UART_IntConfig
   \   0000004A   0xE01B             B.N      ??UART3_IRQHandler_7
    238                  //LPC_UART3->IER &= ((~UART_INTCFG_THRE) & UART_IER_BITMASK);
    239                }
    240                else
    241                {
    242                  LPC_UART3->THR = bSendBufferForReceiver_bt[wpSendToReceiverOut_bt];
   \                     ??UART3_IRQHandler_6:
   \   0000004C   0x.... 0x....      LDR.W    R0,??DataTable11_25
   \   00000050   0x8800             LDRH     R0,[R0, #+0]
   \   00000052   0x.... 0x....      LDR.W    R1,??DataTable11_29
   \   00000056   0x5C40             LDRB     R0,[R0, R1]
   \   00000058   0x.... 0x....      LDR.W    R1,??DataTable11_28  ;; 0x4009c000
   \   0000005C   0x7008             STRB     R0,[R1, #+0]
    243                  wpSendToReceiverOut_bt++;
   \   0000005E   0x.... 0x....      LDR.W    R0,??DataTable11_25
   \   00000062   0x8800             LDRH     R0,[R0, #+0]
   \   00000064   0x1C40             ADDS     R0,R0,#+1
   \   00000066   0x.... 0x....      LDR.W    R1,??DataTable11_25
   \   0000006A   0x8008             STRH     R0,[R1, #+0]
    244                  wpSendToReceiverOut_bt %= BUFFNUM1;
   \   0000006C   0x.... 0x....      LDR.W    R0,??DataTable11_25
   \   00000070   0x8800             LDRH     R0,[R0, #+0]
   \   00000072   0xF44F 0x6180      MOV      R1,#+1024
   \   00000076   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000007A   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   0000007E   0x.... 0x....      LDR.W    R0,??DataTable11_25
   \   00000082   0x8002             STRH     R2,[R0, #+0]
    245                }
    246                break;
   \                     ??UART3_IRQHandler_7:
   \   00000084   0xE022             B.N      ??UART3_IRQHandler_8
    247              case  4:   //接收中
    248                //BTUARTRxDataBuf[BTUARTRxDataBufWritePos++] = BSP_SER_REG_U3_RBR;
    249                //BTUARTRxDataBufWritePos %= BTUARTMAXRXBUF;
    250                g_DeviceBT.Buf[g_DeviceBT.WrSp] = BSP_SER_REG_U3_RBR;
   \                     ??UART3_IRQHandler_3:
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable11_30
   \   0000008A   0x8B00             LDRH     R0,[R0, #+24]
   \   0000008C   0x.... 0x....      LDR.W    R1,??DataTable11_30
   \   00000090   0x6949             LDR      R1,[R1, #+20]
   \   00000092   0x.... 0x....      LDR.W    R2,??DataTable11_28  ;; 0x4009c000
   \   00000096   0x6812             LDR      R2,[R2, #+0]
   \   00000098   0x5442             STRB     R2,[R0, R1]
    251                INCREASE_POINTER(g_DeviceBT.WrSp);
   \   0000009A   0x.... 0x....      LDR.W    R0,??DataTable11_30
   \   0000009E   0x8B00             LDRH     R0,[R0, #+24]
   \   000000A0   0x1C40             ADDS     R0,R0,#+1
   \   000000A2   0x.... 0x....      LDR.W    R1,??DataTable11_30
   \   000000A6   0x8308             STRH     R0,[R1, #+24]
   \   000000A8   0x.... 0x....      LDR.W    R0,??DataTable11_30
   \   000000AC   0x8B00             LDRH     R0,[R0, #+24]
   \   000000AE   0xF44F 0x6100      MOV      R1,#+2048
   \   000000B2   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000000B6   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000000BA   0x.... 0x....      LDR.W    R0,??DataTable11_30
   \   000000BE   0x8302             STRH     R2,[R0, #+24]
    252                
    253                break;
   \   000000C0   0xE004             B.N      ??UART3_IRQHandler_8
    254              case  6:
    255                iir = BSP_SER_REG_U3_LSR;
   \                     ??UART3_IRQHandler_4:
   \   000000C2   0x.... 0x....      LDR.W    R0,??DataTable11_31  ;; 0x4009c014
   \   000000C6   0x6800             LDR      R0,[R0, #+0]
   \   000000C8   0x0004             MOVS     R4,R0
    256                break;
   \   000000CA   0xE7FF             B.N      ??UART3_IRQHandler_8
    257              default:
    258                break;
    259              }
    260              iir = BSP_SER_REG_U3_IIR & 0x0F;
   \                     ??UART3_IRQHandler_5:
   \                     ??UART3_IRQHandler_8:
   \   000000CC   0x.... 0x....      LDR.W    R0,??DataTable11_24  ;; 0x4009c008
   \   000000D0   0x6800             LDR      R0,[R0, #+0]
   \   000000D2   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   000000D6   0x0004             MOVS     R4,R0
   \   000000D8   0xE799             B.N      ??UART3_IRQHandler_0
    261            }
    262          }
   \                     ??UART3_IRQHandler_1:
   \   000000DA   0xBD10             POP      {R4,PC}          ;; return
    263          /*******************2011-10-31 XULIANG******************/

   \                                 In section .text, align 2, keep-with-next
    264          void  UART4_IRQHandler (void)
    265          {
   \                     UART4_IRQHandler:
   \   00000000   0xB510             PUSH     {R4,LR}
    266            unsigned char  iir;
    267            iir = LPC_UART4->IIR & 0x0F;
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable11_32  ;; 0x400a4008
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   0000000C   0x0004             MOVS     R4,R0
    268            while (iir != 1)
   \                     ??UART4_IRQHandler_0:
   \   0000000E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000010   0x2C01             CMP      R4,#+1
   \   00000012   0xD061             BEQ.N    ??UART4_IRQHandler_1
    269            {
    270              //GPIO_OutputValue(BRD_LED_4_PORT, BRD_LED_4_MASK, LED_OFF);
    271              switch (iir)
   \   00000014   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000016   0x0020             MOVS     R0,R4
   \   00000018   0x2802             CMP      R0,#+2
   \   0000001A   0xD004             BEQ.N    ??UART4_IRQHandler_2
   \   0000001C   0x2804             CMP      R0,#+4
   \   0000001E   0xD032             BEQ.N    ??UART4_IRQHandler_3
   \   00000020   0x2806             CMP      R0,#+6
   \   00000022   0xD04D             BEQ.N    ??UART4_IRQHandler_4
   \   00000024   0xE051             B.N      ??UART4_IRQHandler_5
    272              {
    273              case  2:   //发送中
    274                //BSP_OS_SemPost(&BSP_Ser0TxWait);
    275                if(wpSendToReceiverOut_radio == wpSendToReceiverIn_radio){
   \                     ??UART4_IRQHandler_2:
   \   00000026   0x.... 0x....      LDR.W    R0,??DataTable11_33
   \   0000002A   0x8800             LDRH     R0,[R0, #+0]
   \   0000002C   0x.... 0x....      LDR.W    R1,??DataTable11_34
   \   00000030   0x8809             LDRH     R1,[R1, #+0]
   \   00000032   0x4288             CMP      R0,R1
   \   00000034   0xD10A             BNE.N    ??UART4_IRQHandler_6
    276          
    277                  CmcCommandEmpty_radio = TRUE ;
   \   00000036   0x.... 0x....      LDR.W    R0,??DataTable11_35
   \   0000003A   0x2101             MOVS     R1,#+1
   \   0000003C   0x6001             STR      R1,[R0, #+0]
    278                  UART4_IntConfig(LPC_UART4, UART_INTCFG_THRE, DISABLE);
   \   0000003E   0x2200             MOVS     R2,#+0
   \   00000040   0x2101             MOVS     R1,#+1
   \   00000042   0x.... 0x....      LDR.W    R0,??DataTable11_36  ;; 0x400a4000
   \   00000046   0x.... 0x....      BL       UART4_IntConfig
   \   0000004A   0xE01B             B.N      ??UART4_IRQHandler_7
    279                }
    280                else{
    281                  LPC_UART4->THR = bSendBufferForReceiver_radio[wpSendToReceiverOut_radio];
   \                     ??UART4_IRQHandler_6:
   \   0000004C   0x.... 0x....      LDR.W    R0,??DataTable11_33
   \   00000050   0x8800             LDRH     R0,[R0, #+0]
   \   00000052   0x.... 0x....      LDR.W    R1,??DataTable11_37
   \   00000056   0x5C40             LDRB     R0,[R0, R1]
   \   00000058   0x.... 0x....      LDR.W    R1,??DataTable11_36  ;; 0x400a4000
   \   0000005C   0x6008             STR      R0,[R1, #+0]
    282                  wpSendToReceiverOut_radio++;
   \   0000005E   0x.... 0x....      LDR.W    R0,??DataTable11_33
   \   00000062   0x8800             LDRH     R0,[R0, #+0]
   \   00000064   0x1C40             ADDS     R0,R0,#+1
   \   00000066   0x.... 0x....      LDR.W    R1,??DataTable11_33
   \   0000006A   0x8008             STRH     R0,[R1, #+0]
    283                  wpSendToReceiverOut_radio %= BUFFNUM1;
   \   0000006C   0x.... 0x....      LDR.W    R0,??DataTable11_33
   \   00000070   0x8800             LDRH     R0,[R0, #+0]
   \   00000072   0xF44F 0x6180      MOV      R1,#+1024
   \   00000076   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000007A   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   0000007E   0x.... 0x....      LDR.W    R0,??DataTable11_33
   \   00000082   0x8002             STRH     R2,[R0, #+0]
    284                }
    285                break;
   \                     ??UART4_IRQHandler_7:
   \   00000084   0xE021             B.N      ??UART4_IRQHandler_8
    286              case  4:   //接收中
    287                Radio_Data_Process_Buffer[Radio_Data_Len] = LPC_UART4->RBR;
   \                     ??UART4_IRQHandler_3:
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable11_38
   \   0000008A   0x8800             LDRH     R0,[R0, #+0]
   \   0000008C   0x.... 0x....      LDR.W    R1,??DataTable11_39
   \   00000090   0x.... 0x....      LDR.W    R2,??DataTable11_36  ;; 0x400a4000
   \   00000094   0x6812             LDR      R2,[R2, #+0]
   \   00000096   0x5442             STRB     R2,[R0, R1]
    288                INCREASE_RADIO_DATA_POINTER(Radio_Data_Len);
   \   00000098   0x.... 0x....      LDR.W    R0,??DataTable11_38
   \   0000009C   0x8800             LDRH     R0,[R0, #+0]
   \   0000009E   0x1C40             ADDS     R0,R0,#+1
   \   000000A0   0x.... 0x....      LDR.W    R1,??DataTable11_38
   \   000000A4   0x8008             STRH     R0,[R1, #+0]
   \   000000A6   0x.... 0x....      LDR.W    R0,??DataTable11_38
   \   000000AA   0x8800             LDRH     R0,[R0, #+0]
   \   000000AC   0xF44F 0x6180      MOV      R1,#+1024
   \   000000B0   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000000B4   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000000B8   0x.... 0x....      LDR.W    R0,??DataTable11_38
   \   000000BC   0x8002             STRH     R2,[R0, #+0]
    289                break;
   \   000000BE   0xE004             B.N      ??UART4_IRQHandler_8
    290              case  6:
    291                iir = BSP_SER_REG_U4_LSR;
   \                     ??UART4_IRQHandler_4:
   \   000000C0   0x.... 0x....      LDR.W    R0,??DataTable11_40  ;; 0x400ac014
   \   000000C4   0x6800             LDR      R0,[R0, #+0]
   \   000000C6   0x0004             MOVS     R4,R0
    292                break;
   \   000000C8   0xE7FF             B.N      ??UART4_IRQHandler_8
    293              default:
    294                break;
    295              }
    296              iir= LPC_UART4->IIR & 0x0F;
   \                     ??UART4_IRQHandler_5:
   \                     ??UART4_IRQHandler_8:
   \   000000CA   0x.... 0x....      LDR.W    R0,??DataTable11_32  ;; 0x400a4008
   \   000000CE   0x6800             LDR      R0,[R0, #+0]
   \   000000D0   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   000000D4   0x0004             MOVS     R4,R0
   \   000000D6   0xE79A             B.N      ??UART4_IRQHandler_0
    297              //GPIO_OutputValue(BRD_LED_4_PORT, BRD_LED_4_MASK, LED_ON);
    298            }
    299          }
   \                     ??UART4_IRQHandler_1:
   \   000000D8   0xBD10             POP      {R4,PC}          ;; return
    300          /*******************2011-10-31 XULIANG******************/

   \                                 In section .text, align 2, keep-with-next
    301          void  BSP_SerInit (unsigned char id, unsigned int baud_rate) //xf
    302          {
   \                     BSP_SerInit:
   \   00000000   0xE92D 0x43FE      PUSH     {R1-R9,LR}
   \   00000004   0x0004             MOVS     R4,R0
   \   00000006   0x000D             MOVS     R5,R1
    303            unsigned short  div;                                            /* Baud rate divisor                                  */
    304            unsigned char  divlo;
    305            unsigned char  divhi;
    306            unsigned int  pclk_freq;
    307          
    308            UART_CFG_Type UARTConfigStruct;
    309          
    310            UART_FIFO_CFG_Type UARTFIFOConfigStruct;
    311          
    312            pclk_freq  = CLKPWR_GetCLK(CLKPWR_CLKTYPE_PER);
   \   00000008   0x2001             MOVS     R0,#+1
   \   0000000A   0x.... 0x....      BL       CLKPWR_GetCLK
   \   0000000E   0x4681             MOV      R9,R0
    313          
    314            div       = (unsigned short)(((2 * pclk_freq / 16 / baud_rate) + 1) / 2);
   \   00000010   0xEA5F 0x0049      LSLS     R0,R9,#+1
   \   00000014   0x0900             LSRS     R0,R0,#+4
   \   00000016   0xFBB0 0xF0F5      UDIV     R0,R0,R5
   \   0000001A   0x1C40             ADDS     R0,R0,#+1
   \   0000001C   0x0840             LSRS     R0,R0,#+1
   \   0000001E   0x0006             MOVS     R6,R0
    315            divlo     =  div & 0x00FF;                                  // Split divisor into LOW and HIGH bytes              */
   \   00000020   0x0030             MOVS     R0,R6
   \   00000022   0x0007             MOVS     R7,R0
    316            divhi     = (div >> 8) & 0x00FF;
   \   00000024   0xB2B6             UXTH     R6,R6            ;; ZeroExt  R6,R6,#+16,#+16
   \   00000026   0x0A30             LSRS     R0,R6,#+8
   \   00000028   0x4680             MOV      R8,R0
    317            if(0 == id)
   \   0000002A   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000002C   0x2C00             CMP      R4,#+0
   \   0000002E   0xD140             BNE.N    ??BSP_SerInit_0
    318            {
    319              BSP_OS_SemWait(&BSP_Ser0Lock, 0);
   \   00000030   0x2100             MOVS     R1,#+0
   \   00000032   0x.... 0x....      LDR.W    R0,??DataTable11_41
   \   00000036   0x.... 0x....      BL       BSP_OS_SemWait
    320              //OS_ENTER_CRITICAL();
    321              /* Set up clock and power for UART module */
    322              CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCUART0, ENABLE);
   \   0000003A   0x2101             MOVS     R1,#+1
   \   0000003C   0x2008             MOVS     R0,#+8
   \   0000003E   0x.... 0x....      BL       CLKPWR_ConfigPPWR
    323              /*
    324              * Initialize UART0 pin connect
    325              * P0.2: U0_TXD
    326              * P0.3: U0_RXD
    327              */
    328              PINSEL_ConfigPin(0,2,1);
   \   00000042   0x2201             MOVS     R2,#+1
   \   00000044   0x2102             MOVS     R1,#+2
   \   00000046   0x2000             MOVS     R0,#+0
   \   00000048   0x.... 0x....      BL       PINSEL_ConfigPin
    329              PINSEL_ConfigPin(0,3,1);
   \   0000004C   0x2201             MOVS     R2,#+1
   \   0000004E   0x2103             MOVS     R1,#+3
   \   00000050   0x2000             MOVS     R0,#+0
   \   00000052   0x.... 0x....      BL       PINSEL_ConfigPin
    330          
    331              UART_ConfigStructInit(&UARTConfigStruct);
   \   00000056   0xA801             ADD      R0,SP,#+4
   \   00000058   0x.... 0x....      BL       UART_ConfigStructInit
    332          
    333              UARTConfigStruct.Baud_rate = baud_rate;
   \   0000005C   0x9501             STR      R5,[SP, #+4]
    334          
    335              // Initialize IAP_UART_PORT peripheral with given to corresponding parameter
    336              UART_Init(LPC_UART0, &UARTConfigStruct);
   \   0000005E   0xA901             ADD      R1,SP,#+4
   \   00000060   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   00000064   0x.... 0x....      BL       UART_Init
    337          
    338              UART_FIFOConfigStructInit(&UARTFIFOConfigStruct);
   \   00000068   0xA800             ADD      R0,SP,#+0
   \   0000006A   0x.... 0x....      BL       UART_FIFOConfigStructInit
    339          
    340              // Initialize FIFO for UART0 peripheral
    341              UART_FIFOConfig(LPC_UART0, &UARTFIFOConfigStruct);
   \   0000006E   0xA900             ADD      R1,SP,#+0
   \   00000070   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   00000074   0x.... 0x....      BL       UART_FIFOConfig
    342          
    343              UART_TxCmd(LPC_UART0, ENABLE);
   \   00000078   0x2101             MOVS     R1,#+1
   \   0000007A   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   0000007E   0x.... 0x....      BL       UART_TxCmd
    344          
    345              // Enable UART Rx interrupt //
    346              UART_IntConfig(LPC_UART0, UART_INTCFG_RBR, ENABLE);
   \   00000082   0x2201             MOVS     R2,#+1
   \   00000084   0x2100             MOVS     R1,#+0
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   0000008A   0x.... 0x....      BL       UART_IntConfig
    347              UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, ENABLE);
   \   0000008E   0x2201             MOVS     R2,#+1
   \   00000090   0x2101             MOVS     R1,#+1
   \   00000092   0x.... 0x....      LDR.W    R0,??DataTable11_7  ;; 0x4000c000
   \   00000096   0x.... 0x....      BL       UART_IntConfig
    348          
    349          
    350          
    351              NVIC_SetPriority(UART0_IRQn, ((0x01<<4)|0x06)); // preemption = 1, sub-priority = 1
   \   0000009A   0x2116             MOVS     R1,#+22
   \   0000009C   0x2005             MOVS     R0,#+5
   \   0000009E   0x.... 0x....      BL       NVIC_SetPriority
    352              NVIC_EnableIRQ(UART0_IRQn);                     // Enable Interrupt for UART0 channel
   \   000000A2   0x2005             MOVS     R0,#+5
   \   000000A4   0x.... 0x....      BL       NVIC_EnableIRQ
    353          
    354          
    355              BSP_OS_SemPost(&BSP_Ser0Lock);
   \   000000A8   0x.... 0x....      LDR.W    R0,??DataTable11_41
   \   000000AC   0x.... 0x....      BL       BSP_OS_SemPost
   \   000000B0   0xE0F9             B.N      ??BSP_SerInit_1
    356          
    357            }
    358            else if(1 == id)
   \                     ??BSP_SerInit_0:
   \   000000B2   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   000000B4   0x2C01             CMP      R4,#+1
   \   000000B6   0xD13C             BNE.N    ??BSP_SerInit_2
    359            {
    360              BSP_OS_SemWait(&BSP_Ser1Lock, 0);
   \   000000B8   0x2100             MOVS     R1,#+0
   \   000000BA   0x.... 0x....      LDR.W    R0,??DataTable11_42
   \   000000BE   0x.... 0x....      BL       BSP_OS_SemWait
    361          
    362              /* Set up clock and power for UART module */
    363              CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCUART1, ENABLE);
   \   000000C2   0x2101             MOVS     R1,#+1
   \   000000C4   0x2010             MOVS     R0,#+16
   \   000000C6   0x.... 0x....      BL       CLKPWR_ConfigPPWR
    364              /*
    365              * Initialize UART1 pin connect
    366              * P0.15: U1_TXD
    367              * P0.16: U1_RXD
    368              */
    369              PINSEL_ConfigPin(0,15,1);
   \   000000CA   0x2201             MOVS     R2,#+1
   \   000000CC   0x210F             MOVS     R1,#+15
   \   000000CE   0x2000             MOVS     R0,#+0
   \   000000D0   0x.... 0x....      BL       PINSEL_ConfigPin
    370              PINSEL_ConfigPin(0,16,1);
   \   000000D4   0x2201             MOVS     R2,#+1
   \   000000D6   0x2110             MOVS     R1,#+16
   \   000000D8   0x2000             MOVS     R0,#+0
   \   000000DA   0x.... 0x....      BL       PINSEL_ConfigPin
    371              // --------------------- SETUP UART1 ----------------------
    372              BSP_SER_REG_U1_LCR = DEF_BIT_07;                            // Set divisor access bit
   \   000000DE   0x.... 0x....      LDR.W    R0,??DataTable11_43  ;; 0x4001000c
   \   000000E2   0x2180             MOVS     R1,#+128
   \   000000E4   0x6001             STR      R1,[R0, #+0]
    373              BSP_SER_REG_U1_DLL = divlo;                                 // Load divisor
   \   000000E6   0x.... 0x....      LDR.W    R0,??DataTable11_14  ;; 0x40010000
   \   000000EA   0xB2FF             UXTB     R7,R7            ;; ZeroExt  R7,R7,#+24,#+24
   \   000000EC   0x6007             STR      R7,[R0, #+0]
    374              BSP_SER_REG_U1_DLM = divhi;
   \   000000EE   0x.... 0x....      LDR.W    R0,??DataTable11_44  ;; 0x40010004
   \   000000F2   0xFA5F 0xF888      UXTB     R8,R8            ;; ZeroExt  R8,R8,#+24,#+24
   \   000000F6   0xF8C0 0x8000      STR      R8,[R0, #+0]
    375              BSP_SER_REG_U1_LCR = 0x03;                                  // 8 Bits, 1 Stop, No Parity
   \   000000FA   0x.... 0x....      LDR.W    R0,??DataTable11_43  ;; 0x4001000c
   \   000000FE   0x2103             MOVS     R1,#+3
   \   00000100   0x6001             STR      R1,[R0, #+0]
    376                BSP_SER_REG_U1_FCR = DEF_BIT_00;                            // Enable FIFO, flush Rx & Tx
   \   00000102   0x.... 0x....      LDR.W    R0,??DataTable11_11  ;; 0x40010008
   \   00000106   0x2101             MOVS     R1,#+1
   \   00000108   0x6001             STR      R1,[R0, #+0]
    377              BSP_SER_REG_U1_IER = 0x01;                                  //使能接收中断，禁止发送中断
   \   0000010A   0x.... 0x....      LDR.W    R0,??DataTable11_44  ;; 0x40010004
   \   0000010E   0x2101             MOVS     R1,#+1
   \   00000110   0x6001             STR      R1,[R0, #+0]
    378              BSP_SER_REG_U1_FDR = DEF_BIT_NONE;
   \   00000112   0x.... 0x....      LDR.W    R0,??DataTable11_45  ;; 0x40010028
   \   00000116   0x2100             MOVS     R1,#+0
   \   00000118   0x6001             STR      R1,[R0, #+0]
    379          
    380          
    381              NVIC_SetPriority(UART1_IRQn, ((0x01<<4)|0x07)); // preemption = 1, sub-priority = 1
   \   0000011A   0x2117             MOVS     R1,#+23
   \   0000011C   0x2006             MOVS     R0,#+6
   \   0000011E   0x.... 0x....      BL       NVIC_SetPriority
    382              NVIC_EnableIRQ(UART1_IRQn);                     // Enable Interrupt for UART1 channel
   \   00000122   0x2006             MOVS     R0,#+6
   \   00000124   0x.... 0x....      BL       NVIC_EnableIRQ
    383          
    384              BSP_OS_SemPost(&BSP_Ser1Lock);
   \   00000128   0x.... 0x....      LDR.W    R0,??DataTable11_42
   \   0000012C   0x.... 0x....      BL       BSP_OS_SemPost
   \   00000130   0xE0B9             B.N      ??BSP_SerInit_1
    385            }
    386            else if(2 == id)
   \                     ??BSP_SerInit_2:
   \   00000132   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000134   0x2C02             CMP      R4,#+2
   \   00000136   0xD141             BNE.N    ??BSP_SerInit_3
    387            {
    388              BSP_OS_SemWait(&BSP_Ser2Lock, 0);
   \   00000138   0x2100             MOVS     R1,#+0
   \   0000013A   0x.... 0x....      LDR.W    R0,??DataTable11_46
   \   0000013E   0x.... 0x....      BL       BSP_OS_SemWait
    389          
    390              /* Set up clock and power for UART module */
    391              CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCUART2, ENABLE);
   \   00000142   0x2101             MOVS     R1,#+1
   \   00000144   0xF05F 0x7080      MOVS     R0,#+16777216
   \   00000148   0x.... 0x....      BL       CLKPWR_ConfigPPWR
    392              /*
    393              * Initialize UART2 pin connect
    394              * P0.10: U2_TXD
    395              * P0.11: U2_RXD
    396              */
    397              PINSEL_ConfigPin(0,10,1);
   \   0000014C   0x2201             MOVS     R2,#+1
   \   0000014E   0x210A             MOVS     R1,#+10
   \   00000150   0x2000             MOVS     R0,#+0
   \   00000152   0x.... 0x....      BL       PINSEL_ConfigPin
    398              PINSEL_ConfigPin(0,11,1);
   \   00000156   0x2201             MOVS     R2,#+1
   \   00000158   0x210B             MOVS     R1,#+11
   \   0000015A   0x2000             MOVS     R0,#+0
   \   0000015C   0x.... 0x....      BL       PINSEL_ConfigPin
    399              // --------------------- SETUP UART2 ----------------------
    400              /*BSP_SER_REG_U2_LCR = DEF_BIT_07;                            // Set divisor access bit
    401              BSP_SER_REG_U2_DLL = divlo;                                 // Load divisor
    402              BSP_SER_REG_U2_DLM = divhi;
    403              BSP_SER_REG_U2_LCR = 0x03;                                  // 8 Bits, 1 Stop, No Parity
    404              BSP_SER_REG_U2_IER = 0x03;                                  //使能接收中断，禁止发送中断  //edit 2014.06.18 使能发送中断
    405              BSP_SER_REG_U2_FDR = DEF_BIT_NONE;
    406              BSP_SER_REG_U2_FCR = DEF_BIT_00;                            // Enable FIFO, flush Rx & Tx
    407              */
    408              UART_ConfigStructInit(&UARTConfigStruct);
   \   00000160   0xA801             ADD      R0,SP,#+4
   \   00000162   0x.... 0x....      BL       UART_ConfigStructInit
    409              // Re-configure baudrate to 115200bps
    410              UARTConfigStruct.Baud_rate = baud_rate;//115200;
   \   00000166   0x9501             STR      R5,[SP, #+4]
    411          
    412              // Initialize IAP_UART_PORT peripheral with given to corresponding parameter
    413              UART_Init(LPC_UART2, &UARTConfigStruct);
   \   00000168   0xA901             ADD      R1,SP,#+4
   \   0000016A   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   0000016E   0x.... 0x....      BL       UART_Init
    414          
    415              UART_FIFOConfigStructInit(&UARTFIFOConfigStruct);
   \   00000172   0xA800             ADD      R0,SP,#+0
   \   00000174   0x.... 0x....      BL       UART_FIFOConfigStructInit
    416          
    417              // Initialize FIFO for UART0 peripheral
    418              UART_FIFOConfig(LPC_UART2, &UARTFIFOConfigStruct);
   \   00000178   0xA900             ADD      R1,SP,#+0
   \   0000017A   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   0000017E   0x.... 0x....      BL       UART_FIFOConfig
    419          
    420              // Enable UART Rx interrupt //
    421              UART_IntConfig(LPC_UART2, UART_INTCFG_RBR, ENABLE);
   \   00000182   0x2201             MOVS     R2,#+1
   \   00000184   0x2100             MOVS     R1,#+0
   \   00000186   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   0000018A   0x.... 0x....      BL       UART_IntConfig
    422              UART_IntConfig(LPC_UART2, UART_INTCFG_THRE, ENABLE);
   \   0000018E   0x2201             MOVS     R2,#+1
   \   00000190   0x2101             MOVS     R1,#+1
   \   00000192   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   00000196   0x.... 0x....      BL       UART_IntConfig
    423              // Enable UART line status interrupt //
    424              //UART_IntConfig(LPC_UART0, UART_INTCFG_RLS, ENABLE);
    425              // Enable UART Transmit
    426              UART_TxCmd(LPC_UART2, ENABLE);
   \   0000019A   0x2101             MOVS     R1,#+1
   \   0000019C   0x.... 0x....      LDR.W    R0,??DataTable11_20  ;; 0x40098000
   \   000001A0   0x.... 0x....      BL       UART_TxCmd
    427          
    428              NVIC_SetPriority(UART2_IRQn, ((0x01<<4)|0x05)); // preemption = 1, sub-priority = 1
   \   000001A4   0x2115             MOVS     R1,#+21
   \   000001A6   0x2007             MOVS     R0,#+7
   \   000001A8   0x.... 0x....      BL       NVIC_SetPriority
    429              NVIC_EnableIRQ(UART2_IRQn);                     // Enable Interrupt for UART2 channel
   \   000001AC   0x2007             MOVS     R0,#+7
   \   000001AE   0x.... 0x....      BL       NVIC_EnableIRQ
    430          
    431              BSP_OS_SemPost(&BSP_Ser2Lock);
   \   000001B2   0x.... 0x....      LDR.W    R0,??DataTable11_46
   \   000001B6   0x.... 0x....      BL       BSP_OS_SemPost
   \   000001BA   0xE074             B.N      ??BSP_SerInit_1
    432            }
    433            else if(3 == id)
   \                     ??BSP_SerInit_3:
   \   000001BC   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   000001BE   0x2C03             CMP      R4,#+3
   \   000001C0   0xD141             BNE.N    ??BSP_SerInit_4
    434            {
    435              BSP_OS_SemWait(&BSP_Ser3Lock, 0);
   \   000001C2   0x2100             MOVS     R1,#+0
   \   000001C4   0x.... 0x....      LDR.W    R0,??DataTable11_47
   \   000001C8   0x.... 0x....      BL       BSP_OS_SemWait
    436          
    437              /* Set up clock and power for UART module */
    438              CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCUART3, ENABLE);
   \   000001CC   0x2101             MOVS     R1,#+1
   \   000001CE   0xF05F 0x7000      MOVS     R0,#+33554432
   \   000001D2   0x.... 0x....      BL       CLKPWR_ConfigPPWR
    439              /*
    440              * Initialize UART3 pin connect
    441              * P4.28: U3_TXD
    442              * P4.29: U3_RXD
    443              */
    444              PINSEL_ConfigPin(4,28,2);
   \   000001D6   0x2202             MOVS     R2,#+2
   \   000001D8   0x211C             MOVS     R1,#+28
   \   000001DA   0x2004             MOVS     R0,#+4
   \   000001DC   0x.... 0x....      BL       PINSEL_ConfigPin
    445              PINSEL_ConfigPin(4,29,2);
   \   000001E0   0x2202             MOVS     R2,#+2
   \   000001E2   0x211D             MOVS     R1,#+29
   \   000001E4   0x2004             MOVS     R0,#+4
   \   000001E6   0x.... 0x....      BL       PINSEL_ConfigPin
    446              /*                              //add by xxw 20140730                            // --------------------- SETUP UART3 ----------------------
    447              BSP_SER_REG_U3_LCR = DEF_BIT_07;                            // Set divisor access bit
    448              BSP_SER_REG_U3_DLL = divlo;                                 // Load divisor
    449              BSP_SER_REG_U3_DLM = divhi;
    450              BSP_SER_REG_U3_LCR = 0x03;                                  // 8 Bits, 1 Stop, No Parity
    451              BSP_SER_REG_U3_IER = 0x03;                                  //使能接收中断，禁止发送中断  //edit 2014.06.18 使能发送中断
    452              BSP_SER_REG_U3_FDR = DEF_BIT_NONE;
    453              BSP_SER_REG_U3_FCR = DEF_BIT_00;                            // Enable FIFO, flush Rx & Tx
    454              */
    455              UART_ConfigStructInit(&UARTConfigStruct);
   \   000001EA   0xA801             ADD      R0,SP,#+4
   \   000001EC   0x.... 0x....      BL       UART_ConfigStructInit
    456              // Re-configure baudrate to 115200bps
    457              UARTConfigStruct.Baud_rate = baud_rate;//115200;
   \   000001F0   0x9501             STR      R5,[SP, #+4]
    458          
    459              // Initialize IAP_UART_PORT peripheral with given to corresponding parameter
    460              UART_Init(LPC_UART3, &UARTConfigStruct);
   \   000001F2   0xA901             ADD      R1,SP,#+4
   \   000001F4   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   000001F8   0x.... 0x....      BL       UART_Init
    461          
    462              UART_FIFOConfigStructInit(&UARTFIFOConfigStruct);
   \   000001FC   0xA800             ADD      R0,SP,#+0
   \   000001FE   0x.... 0x....      BL       UART_FIFOConfigStructInit
    463          
    464              // Initialize FIFO for UART0 peripheral
    465              UART_FIFOConfig(LPC_UART3, &UARTFIFOConfigStruct);
   \   00000202   0xA900             ADD      R1,SP,#+0
   \   00000204   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   00000208   0x.... 0x....      BL       UART_FIFOConfig
    466          
    467              // Enable UART Rx interrupt //
    468              UART_IntConfig(LPC_UART3, UART_INTCFG_RBR, ENABLE);
   \   0000020C   0x2201             MOVS     R2,#+1
   \   0000020E   0x2100             MOVS     R1,#+0
   \   00000210   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   00000214   0x.... 0x....      BL       UART_IntConfig
    469              UART_IntConfig(LPC_UART3, UART_INTCFG_THRE, ENABLE);
   \   00000218   0x2201             MOVS     R2,#+1
   \   0000021A   0x2101             MOVS     R1,#+1
   \   0000021C   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   00000220   0x.... 0x....      BL       UART_IntConfig
    470              // Enable UART line status interrupt //
    471              //UART_IntConfig(LPC_UART0, UART_INTCFG_RLS, ENABLE);
    472              // Enable UART Transmit
    473              UART_TxCmd(LPC_UART3, ENABLE);
   \   00000224   0x2101             MOVS     R1,#+1
   \   00000226   0x.... 0x....      LDR.W    R0,??DataTable11_28  ;; 0x4009c000
   \   0000022A   0x.... 0x....      BL       UART_TxCmd
    474          
    475              NVIC_SetPriority(UART3_IRQn, ((0x01<<4)|0x08)); // preemption = 1, sub-priority = 1
   \   0000022E   0x2118             MOVS     R1,#+24
   \   00000230   0x2008             MOVS     R0,#+8
   \   00000232   0x.... 0x....      BL       NVIC_SetPriority
    476              NVIC_EnableIRQ(UART3_IRQn);                     // Enable Interrupt for UART3 channel
   \   00000236   0x2008             MOVS     R0,#+8
   \   00000238   0x.... 0x....      BL       NVIC_EnableIRQ
    477          
    478              BSP_OS_SemPost(&BSP_Ser3Lock);
   \   0000023C   0x.... 0x....      LDR.W    R0,??DataTable11_47
   \   00000240   0x.... 0x....      BL       BSP_OS_SemPost
   \   00000244   0xE02F             B.N      ??BSP_SerInit_1
    479            }
    480            /**************************2011-10-31 XULIANG*************************/
    481            else if(4 == id)
   \                     ??BSP_SerInit_4:
   \   00000246   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000248   0x2C04             CMP      R4,#+4
   \   0000024A   0xD12C             BNE.N    ??BSP_SerInit_1
    482            {
    483              //BSP_OS_SemWait(&BSP_Ser3Lock, 0);
    484          
    485              /* Set up clock and power for UART module */
    486              CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCUART4, ENABLE);
   \   0000024C   0x2101             MOVS     R1,#+1
   \   0000024E   0xF44F 0x7080      MOV      R0,#+256
   \   00000252   0x.... 0x....      BL       CLKPWR_ConfigPPWR
    487              /*
    488              * Initialize UART4 pin connect
    489              * P5.4: U4_TXD
    490              * P5.3: U4_RXD
    491              */
    492              PINSEL_ConfigPin(5,4,4);
   \   00000256   0x2204             MOVS     R2,#+4
   \   00000258   0x2104             MOVS     R1,#+4
   \   0000025A   0x2005             MOVS     R0,#+5
   \   0000025C   0x.... 0x....      BL       PINSEL_ConfigPin
    493              PINSEL_ConfigPin(5,3,4);
   \   00000260   0x2204             MOVS     R2,#+4
   \   00000262   0x2103             MOVS     R1,#+3
   \   00000264   0x2005             MOVS     R0,#+5
   \   00000266   0x.... 0x....      BL       PINSEL_ConfigPin
    494          
    495              /* Initialize UART Configuration parameter structure to default state:
    496              * Baudrate = 9600bps
    497              * 8 data bit
    498              * 1 Stop bit
    499              * None parity
    500              */
    501              UART_ConfigStructInit(&UARTConfigStruct);
   \   0000026A   0xA801             ADD      R0,SP,#+4
   \   0000026C   0x.... 0x....      BL       UART_ConfigStructInit
    502              // Re-configure baudrate to 115200bps
    503              UARTConfigStruct.Baud_rate = baud_rate;//115200;
   \   00000270   0x9501             STR      R5,[SP, #+4]
    504          
    505              // Initialize IAP_UART_PORT peripheral with given to corresponding parameter
    506              UART4_Init(LPC_UART4, &UARTConfigStruct);
   \   00000272   0xA901             ADD      R1,SP,#+4
   \   00000274   0x.... 0x....      LDR.W    R0,??DataTable11_36  ;; 0x400a4000
   \   00000278   0x.... 0x....      BL       UART4_Init
    507          
    508              UART_FIFOConfigStructInit(&UARTFIFOConfigStruct);
   \   0000027C   0xA800             ADD      R0,SP,#+0
   \   0000027E   0x.... 0x....      BL       UART_FIFOConfigStructInit
    509          
    510              // Initialize FIFO for UART0 peripheral
    511              //UART_FIFOConfig(LPC_UART4, &UARTFIFOConfigStruct);
    512          
    513              // Enable UART Rx interrupt //
    514              UART4_IntConfig(LPC_UART4, UART_INTCFG_RBR, ENABLE);
   \   00000282   0x2201             MOVS     R2,#+1
   \   00000284   0x2100             MOVS     R1,#+0
   \   00000286   0x.... 0x....      LDR.W    R0,??DataTable11_36  ;; 0x400a4000
   \   0000028A   0x.... 0x....      BL       UART4_IntConfig
    515              // Enable UART line status interrupt //
    516              ///UART_IntConfig(LPC_UART0, UART_INTCFG_RLS, ENABLE);
    517              // Enable UART Transmit
    518              UART4_TxCmd(LPC_UART4, ENABLE);
   \   0000028E   0x2101             MOVS     R1,#+1
   \   00000290   0x.... 0x....      LDR.W    R0,??DataTable11_36  ;; 0x400a4000
   \   00000294   0x.... 0x....      BL       UART4_TxCmd
    519          
    520          
    521              NVIC_SetPriority(UART4_IRQn, ((0x01<<3)|0x01)); // preemption = 1, sub-priority = 1
   \   00000298   0x2109             MOVS     R1,#+9
   \   0000029A   0x2023             MOVS     R0,#+35
   \   0000029C   0x.... 0x....      BL       NVIC_SetPriority
    522              NVIC_EnableIRQ(UART4_IRQn);                     // Enable Interrupt for UART0 channel
   \   000002A0   0x2023             MOVS     R0,#+35
   \   000002A2   0x.... 0x....      BL       NVIC_EnableIRQ
    523            }
    524            /*********************2011-10-31 XULIANG*******************/
    525          }
   \                     ??BSP_SerInit_1:
   \   000002A6   0xE8BD 0x83F7      POP      {R0-R2,R4-R9,PC}  ;; return
    526          
    527          

   \                                 In section .text, align 2, keep-with-next
    528          void  BSP_SerInitSem ()
    529          {  ///*
   \                     BSP_SerInitSem:
   \   00000000   0xB580             PUSH     {R7,LR}
    530            BSP_OS_SemCreate(&BSP_Ser0TxWait, 0, "Serial0 Tx Wait");
   \   00000002   0x.... 0x....      LDR.W    R2,??DataTable11_48
   \   00000006   0x2100             MOVS     R1,#+0
   \   00000008   0x.... 0x....      LDR.W    R0,??DataTable11_49
   \   0000000C   0x.... 0x....      BL       BSP_OS_SemCreate
    531            BSP_OS_SemCreate(&BSP_Ser0Lock  , 1, "Serial0 Lock");
   \   00000010   0x.... 0x....      LDR.W    R2,??DataTable11_50
   \   00000014   0x2101             MOVS     R1,#+1
   \   00000016   0x.... 0x....      LDR.W    R0,??DataTable11_41
   \   0000001A   0x.... 0x....      BL       BSP_OS_SemCreate
    532            //BSP_OS_SemCreate(&BSP_Ser1TxWait, 0, "Serial1 Tx Wait");
    533            BSP_OS_SemCreate(&BSP_Ser1Lock  , 1, "Serial1 Lock");
   \   0000001E   0x.... 0x....      LDR.W    R2,??DataTable11_51
   \   00000022   0x2101             MOVS     R1,#+1
   \   00000024   0x.... 0x....      LDR.W    R0,??DataTable11_42
   \   00000028   0x.... 0x....      BL       BSP_OS_SemCreate
    534            //BSP_OS_SemCreate(&BSP_Ser2TxWait, 0, "Serial2 Tx Wait");
    535            BSP_OS_SemCreate(&BSP_Ser2Lock  , 1, "Serial2 Lock");
   \   0000002C   0x.... 0x....      LDR.W    R2,??DataTable11_52
   \   00000030   0x2101             MOVS     R1,#+1
   \   00000032   0x.... 0x....      LDR.W    R0,??DataTable11_46
   \   00000036   0x.... 0x....      BL       BSP_OS_SemCreate
    536            //BSP_OS_SemCreate(&BSP_Ser3TxWait, 0, "Serial3 Tx Wait");
    537            BSP_OS_SemCreate(&BSP_Ser3Lock  , 1, "Serial3 Lock");
   \   0000003A   0x.... 0x....      LDR.W    R2,??DataTable11_53
   \   0000003E   0x2101             MOVS     R1,#+1
   \   00000040   0x.... 0x....      LDR.W    R0,??DataTable11_47
   \   00000044   0x.... 0x....      BL       BSP_OS_SemCreate
    538            //*/
    539          }
   \   00000048   0xBD01             POP      {R0,PC}          ;; return
    540          

   \                                 In section .text, align 2, keep-with-next
    541          void  BSP_SerSendData (unsigned char id, unsigned char *p, unsigned short length)
    542          {
   \                     BSP_SerSendData:
   \   00000000   0xE92D 0x4FF5      PUSH     {R0,R2,R4-R11,LR}
   \   00000004   0xB083             SUB      SP,SP,#+12
   \   00000006   0x000C             MOVS     R4,R1
    543            unsigned char lsr;
    544            unsigned short i;
    545            unsigned short nReadyForSend;
    546            unsigned int COUNT = 0;
   \   00000008   0x2000             MOVS     R0,#+0
   \   0000000A   0x9001             STR      R0,[SP, #+4]
    547            unsigned short nReadyForSend_gps;//add by xxw 20140730
    548            unsigned int COUNT_gps = 0;
   \   0000000C   0x2600             MOVS     R6,#+0
    549            unsigned short nReadyForSend_bt;
    550            unsigned int COUNT_bt = 0;
   \   0000000E   0xF05F 0x0800      MOVS     R8,#+0
    551            unsigned short nReadyForSend_radio;
    552            unsigned int COUNT_radio = 0;
   \   00000012   0xF05F 0x0A00      MOVS     R10,#+0
    553            //OS_CPU_SR  cpu_sr = 0u;
    554            switch(id)
   \   00000016   0xF89D 0x000C      LDRB     R0,[SP, #+12]
   \   0000001A   0x2800             CMP      R0,#+0
   \   0000001C   0xD008             BEQ.N    ??BSP_SerSendData_0
   \   0000001E   0x2802             CMP      R0,#+2
   \   00000020   0xD04C             BEQ.N    ??BSP_SerSendData_1
   \   00000022   0xD324             BCC.N    ??BSP_SerSendData_2
   \   00000024   0x2804             CMP      R0,#+4
   \   00000026   0xF000 0x8106      BEQ.W    ??BSP_SerSendData_3
   \   0000002A   0xF0C0 0x80A5      BCC.W    ??BSP_SerSendData_4
   \   0000002E   0xE163             B.N      ??BSP_SerSendData_5
    555            {
    556            case 0:
    557                BSP_OS_SemWait(&BSP_Ser0Lock, 0);
   \                     ??BSP_SerSendData_0:
   \   00000030   0x2100             MOVS     R1,#+0
   \   00000032   0x.... 0x....      LDR.W    R0,??DataTable11_41
   \   00000036   0x.... 0x....      BL       BSP_OS_SemWait
    558                for(i = 0; i < length; i++)
   \   0000003A   0x2000             MOVS     R0,#+0
   \   0000003C   0x4683             MOV      R11,R0
   \                     ??BSP_SerSendData_6:
   \   0000003E   0xF8BD 0x0010      LDRH     R0,[SP, #+16]
   \   00000042   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   00000046   0x4583             CMP      R11,R0
   \   00000048   0xD20C             BCS.N    ??BSP_SerSendData_7
    559                {
    560                    //查询发送 
    561                    while( !(LPC_UART0->LSR & UART_LSR_THRE) );	//While THR is NOT empty, wait!
   \                     ??BSP_SerSendData_8:
   \   0000004A   0x....             LDR.N    R0,??DataTable11_10  ;; 0x4000c014
   \   0000004C   0x7800             LDRB     R0,[R0, #+0]
   \   0000004E   0x0680             LSLS     R0,R0,#+26
   \   00000050   0xD5FB             BPL.N    ??BSP_SerSendData_8
    562                    LPC_UART0->THR = *(p + i);			//Load new data	 
   \   00000052   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   00000056   0xF81B 0x0004      LDRB     R0,[R11, R4]
   \   0000005A   0x....             LDR.N    R1,??DataTable11_7  ;; 0x4000c000
   \   0000005C   0x7008             STRB     R0,[R1, #+0]
    563                }   
   \   0000005E   0xF11B 0x0B01      ADDS     R11,R11,#+1
   \   00000062   0xE7EC             B.N      ??BSP_SerSendData_6
    564                BSP_OS_SemPost(&BSP_Ser0Lock);
   \                     ??BSP_SerSendData_7:
   \   00000064   0x.... 0x....      LDR.W    R0,??DataTable11_41
   \   00000068   0x.... 0x....      BL       BSP_OS_SemPost
    565              
    566              /*
    567              BSP_OS_SemWait(&BSP_Ser0Lock, 0);
    568              for(i = 0; i < length; i++)
    569              {
    570              BSP_SER_REG_U0_THR = *(p + i);
    571              DEF_BIT_SET(BSP_SER_REG_U0_IER, DEF_BIT_01);
    572              BSP_OS_SemWait(&BSP_Ser0TxWait, 0);
    573              DEF_BIT_CLR(BSP_SER_REG_U0_IER, DEF_BIT_01);
    574            }
    575              BSP_OS_SemPost(&BSP_Ser0Lock);
    576              */
    577              /* 
    578              BSP_OS_SemWait(&BSP_Ser0Lock, 0);
    579          
    580          
    581              //UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, DISABLE);
    582              for(i = 0; i < length; i++)
    583              {
    584                //查询发送
    585                //while( !(LPC_UART0->LSR & UART_LSR_THRE) );	//While THR is NOT empty, wait!
    586                //LPC_UART0->THR = *(p + i);			//Load new data	
    587                while(1){
    588                  if((COUNT ++) > 65535)
    589                  {
    590                    //BSP_SerInit(0,rate_current);
    591                    CmcCommandEmpty = TRUE;
    592                    break;
    593                  }
    594                  nReadyForSend = wpSendToReceiverIn - wpSendToReceiverOut;
    595                  while(nReadyForSend >= BUFFNUM1) nReadyForSend += BUFFNUM1;	
    596                  //nReadyForSend %= BUFFNUM1;   	// 这行代码错误，可能导致软件死机
    597                  if(nReadyForSend < (BUFFNUM1 - 1)) // Wait for send out at least one byte!	(BUFFNUM0 - 1) wangjiejun 2010-06-07
    598                    break;
    599                }
    600                COUNT = 0;
    601                bSendBufferForReceiver[wpSendToReceiverIn] = *(p + i);
    602                wpSendToReceiverIn++;
    603                wpSendToReceiverIn %= BUFFNUM1;
    604                if(CmcCommandEmpty){
    605          
    606                  CmcCommandEmpty = FALSE;
    607                  LPC_UART0->THR = *p;
    608                  //OS_ENTER_CRITICAL();
    609                  wpSendToReceiverOut++;
    610                  //OS_EXIT_CRITICAL();
    611                  wpSendToReceiverOut %= BUFFNUM1;
    612                  UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, ENABLE);
    613                }
    614                //UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, ENABLE);
    615              }
    616              //UART_IntConfig(LPC_UART0, UART_INTCFG_THRE, ENABLE);
    617              BSP_OS_SemPost(&BSP_Ser0Lock);
    618              //*/
    619              break;
   \   0000006C   0xE144             B.N      ??BSP_SerSendData_9
    620            case 1:
    621              /*
    622              BSP_OS_SemWait(&BSP_Ser1Lock, 0);
    623              for(i = 0; i < length; i++)
    624              {
    625              BSP_SER_REG_U1_THR = *(p + i);
    626              DEF_BIT_SET(BSP_SER_REG_U1_IER, DEF_BIT_01);
    627              BSP_OS_SemWait(&BSP_Ser1TxWait, 0);
    628              DEF_BIT_CLR(BSP_SER_REG_U1_IER, DEF_BIT_01);
    629            }
    630              BSP_OS_SemPost(&BSP_Ser1Lock);
    631              */
    632              BSP_OS_SemWait(&BSP_Ser1Lock, 0);
   \                     ??BSP_SerSendData_2:
   \   0000006E   0x2100             MOVS     R1,#+0
   \   00000070   0x.... 0x....      LDR.W    R0,??DataTable11_42
   \   00000074   0x.... 0x....      BL       BSP_OS_SemWait
    633              for(i = 0; i < length; i++)
   \   00000078   0x2000             MOVS     R0,#+0
   \   0000007A   0x4683             MOV      R11,R0
   \                     ??BSP_SerSendData_10:
   \   0000007C   0xF8BD 0x0010      LDRH     R0,[SP, #+16]
   \   00000080   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   00000084   0x4583             CMP      R11,R0
   \   00000086   0xD215             BCS.N    ??BSP_SerSendData_11
    634              {
    635                //查询发送
    636                BSP_SER_REG_U1_THR = *(p + i);
   \   00000088   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   0000008C   0xF81B 0x0004      LDRB     R0,[R11, R4]
   \   00000090   0x....             LDR.N    R1,??DataTable11_14  ;; 0x40010000
   \   00000092   0x6008             STR      R0,[R1, #+0]
    637                lsr = BSP_SER_REG_U1_LSR;
   \   00000094   0x....             LDR.N    R0,??DataTable11_15  ;; 0x40010014
   \   00000096   0x6800             LDR      R0,[R0, #+0]
   \   00000098   0xF88D 0x0000      STRB     R0,[SP, #+0]
    638                while(!(lsr&0x20))            //等待l送Y束
   \                     ??BSP_SerSendData_12:
   \   0000009C   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000A0   0x0680             LSLS     R0,R0,#+26
   \   000000A2   0xD404             BMI.N    ??BSP_SerSendData_13
    639                  lsr = BSP_SER_REG_U1_LSR;
   \   000000A4   0x....             LDR.N    R0,??DataTable11_15  ;; 0x40010014
   \   000000A6   0x6800             LDR      R0,[R0, #+0]
   \   000000A8   0xF88D 0x0000      STRB     R0,[SP, #+0]
   \   000000AC   0xE7F6             B.N      ??BSP_SerSendData_12
    640              }
   \                     ??BSP_SerSendData_13:
   \   000000AE   0xF11B 0x0B01      ADDS     R11,R11,#+1
   \   000000B2   0xE7E3             B.N      ??BSP_SerSendData_10
    641              BSP_OS_SemPost(&BSP_Ser1Lock);
   \                     ??BSP_SerSendData_11:
   \   000000B4   0x....             LDR.N    R0,??DataTable11_42
   \   000000B6   0x.... 0x....      BL       BSP_OS_SemPost
    642              //*/
    643              break;
   \   000000BA   0xE11D             B.N      ??BSP_SerSendData_9
    644            case 2:
    645              /*
    646              BSP_OS_SemWait(&BSP_Ser2Lock, 0);
    647              for(i = 0; i < length; i++)
    648              {
    649              BSP_SER_REG_U2_THR = *(p + i);
    650              DEF_BIT_SET(BSP_SER_REG_U2_IER, DEF_BIT_01);
    651              BSP_OS_SemWait(&BSP_Ser2TxWait, 0);
    652              DEF_BIT_CLR(BSP_SER_REG_U2_IER, DEF_BIT_01);
    653            }
    654              BSP_OS_SemPost(&BSP_Ser2Lock);
    655              */
    656              /*
    657              BSP_OS_SemWait(&BSP_Ser2Lock, 0);
    658              for(i = 0; i < length; i++)
    659              {
    660              //查询发送
    661              BSP_SER_REG_U2_THR = *(p + i);
    662              lsr = BSP_SER_REG_U2_LSR;
    663              while(!(lsr&0x20))            //等待l送Y束
    664              lsr = BSP_SER_REG_U2_LSR;
    665            }
    666              BSP_OS_SemPost(&BSP_Ser2Lock);
    667              */  //edit 2014.06.19 屏蔽该段代码，将查询发送改为中断发送
    668          
    669              //edit 2014.06.19 GPS数据通过中断方式发送//add by xxw 20140730
    670              for(i = 0; i < length; i++)
   \                     ??BSP_SerSendData_1:
   \   000000BC   0x2000             MOVS     R0,#+0
   \   000000BE   0x4683             MOV      R11,R0
   \                     ??BSP_SerSendData_14:
   \   000000C0   0xF8BD 0x0010      LDRH     R0,[SP, #+16]
   \   000000C4   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   000000C8   0x4583             CMP      R11,R0
   \   000000CA   0xD254             BCS.N    ??BSP_SerSendData_15
    671              {
    672                while(1)
    673                {
    674                  if((COUNT_gps ++) > 65535)
   \                     ??BSP_SerSendData_16:
   \   000000CC   0x0030             MOVS     R0,R6
   \   000000CE   0x1C46             ADDS     R6,R0,#+1
   \   000000D0   0xF5B0 0x3F80      CMP      R0,#+65536
   \   000000D4   0xD303             BCC.N    ??BSP_SerSendData_17
    675                  {
    676                    CmcCommandEmpty_gps = TRUE;
   \   000000D6   0x....             LDR.N    R0,??DataTable11_19
   \   000000D8   0x2101             MOVS     R1,#+1
   \   000000DA   0x6001             STR      R1,[R0, #+0]
    677                    break;
   \   000000DC   0xE011             B.N      ??BSP_SerSendData_18
    678                  }
    679                  nReadyForSend_gps = wpSendToReceiverIn_gps - wpSendToReceiverOut_gps;
   \                     ??BSP_SerSendData_17:
   \   000000DE   0x....             LDR.N    R0,??DataTable11_18
   \   000000E0   0x8800             LDRH     R0,[R0, #+0]
   \   000000E2   0x....             LDR.N    R1,??DataTable11_17
   \   000000E4   0x8809             LDRH     R1,[R1, #+0]
   \   000000E6   0x1A40             SUBS     R0,R0,R1
   \   000000E8   0x0005             MOVS     R5,R0
    680                  while(nReadyForSend_gps >= BUFFNUM1) nReadyForSend_gps += BUFFNUM1;	
   \                     ??BSP_SerSendData_19:
   \   000000EA   0xB2AD             UXTH     R5,R5            ;; ZeroExt  R5,R5,#+16,#+16
   \   000000EC   0xF5B5 0x6F80      CMP      R5,#+1024
   \   000000F0   0xDB02             BLT.N    ??BSP_SerSendData_20
   \   000000F2   0xF515 0x6580      ADDS     R5,R5,#+1024
   \   000000F6   0xE7F8             B.N      ??BSP_SerSendData_19
    681                  if(nReadyForSend_gps < (BUFFNUM1 - 1))
   \                     ??BSP_SerSendData_20:
   \   000000F8   0xB2AD             UXTH     R5,R5            ;; ZeroExt  R5,R5,#+16,#+16
   \   000000FA   0xF240 0x30FF      MOVW     R0,#+1023
   \   000000FE   0x4285             CMP      R5,R0
   \   00000100   0xDAE4             BGE.N    ??BSP_SerSendData_16
    682                    break;
    683                }
    684                COUNT_gps = 0;
   \                     ??BSP_SerSendData_18:
   \   00000102   0x2000             MOVS     R0,#+0
   \   00000104   0x0006             MOVS     R6,R0
    685                bSendBufferForReceiver_gps[wpSendToReceiverIn_gps] = *(p + i);
   \   00000106   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   0000010A   0xF81B 0x0004      LDRB     R0,[R11, R4]
   \   0000010E   0x....             LDR.N    R1,??DataTable11_18
   \   00000110   0x8809             LDRH     R1,[R1, #+0]
   \   00000112   0x....             LDR.N    R2,??DataTable11_21
   \   00000114   0x5488             STRB     R0,[R1, R2]
    686                wpSendToReceiverIn_gps++;
   \   00000116   0x....             LDR.N    R0,??DataTable11_18
   \   00000118   0x8800             LDRH     R0,[R0, #+0]
   \   0000011A   0x1C40             ADDS     R0,R0,#+1
   \   0000011C   0x....             LDR.N    R1,??DataTable11_18
   \   0000011E   0x8008             STRH     R0,[R1, #+0]
    687                wpSendToReceiverIn_gps %= BUFFNUM1;
   \   00000120   0x....             LDR.N    R0,??DataTable11_18
   \   00000122   0x8800             LDRH     R0,[R0, #+0]
   \   00000124   0xF44F 0x6180      MOV      R1,#+1024
   \   00000128   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000012C   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   00000130   0x....             LDR.N    R0,??DataTable11_18
   \   00000132   0x8002             STRH     R2,[R0, #+0]
    688                if(CmcCommandEmpty_gps)
   \   00000134   0x....             LDR.N    R0,??DataTable11_19
   \   00000136   0x6800             LDR      R0,[R0, #+0]
   \   00000138   0x2800             CMP      R0,#+0
   \   0000013A   0xD019             BEQ.N    ??BSP_SerSendData_21
    689                {
    690                  CmcCommandEmpty_gps = FALSE;
   \   0000013C   0x....             LDR.N    R0,??DataTable11_19
   \   0000013E   0x2100             MOVS     R1,#+0
   \   00000140   0x6001             STR      R1,[R0, #+0]
    691                  LPC_UART2->THR = *p;
   \   00000142   0x....             LDR.N    R0,??DataTable11_20  ;; 0x40098000
   \   00000144   0x7821             LDRB     R1,[R4, #+0]
   \   00000146   0x7001             STRB     R1,[R0, #+0]
    692                  wpSendToReceiverOut_gps++;
   \   00000148   0x....             LDR.N    R0,??DataTable11_17
   \   0000014A   0x8800             LDRH     R0,[R0, #+0]
   \   0000014C   0x1C40             ADDS     R0,R0,#+1
   \   0000014E   0x....             LDR.N    R1,??DataTable11_17
   \   00000150   0x8008             STRH     R0,[R1, #+0]
    693                  wpSendToReceiverOut_gps %= BUFFNUM1;
   \   00000152   0x....             LDR.N    R0,??DataTable11_17
   \   00000154   0x8800             LDRH     R0,[R0, #+0]
   \   00000156   0xF44F 0x6180      MOV      R1,#+1024
   \   0000015A   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000015E   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   00000162   0x....             LDR.N    R0,??DataTable11_17
   \   00000164   0x8002             STRH     R2,[R0, #+0]
    694                  UART_IntConfig(LPC_UART2, UART_INTCFG_THRE, ENABLE);
   \   00000166   0x2201             MOVS     R2,#+1
   \   00000168   0x2101             MOVS     R1,#+1
   \   0000016A   0x....             LDR.N    R0,??DataTable11_20  ;; 0x40098000
   \   0000016C   0x.... 0x....      BL       UART_IntConfig
    695                  //LPC_UART2->IER |= UART_IER_THREINT_EN;  //使能发送中断 for test
    696                }
    697              }
   \                     ??BSP_SerSendData_21:
   \   00000170   0xF11B 0x0B01      ADDS     R11,R11,#+1
   \   00000174   0xE7A4             B.N      ??BSP_SerSendData_14
    698              //BSP_OS_SemPost(&BSP_Ser2Lock);
    699              break;
   \                     ??BSP_SerSendData_15:
   \   00000176   0xE0BF             B.N      ??BSP_SerSendData_9
    700            case 3:
    701              /*BSP_OS_SemWait(&BSP_Ser3Lock, 0);
    702              for(i = 0; i < length; i++)
    703              {
    704              //查询发送
    705              BSP_SER_REG_U3_THR = *(p + i);
    706              lsr = BSP_SER_REG_U3_LSR;
    707              while(!(lsr&0x20))            //等待l送Y束
    708              lsr = BSP_SER_REG_U3_LSR;
    709            }
    710              BSP_OS_SemPost(&BSP_Ser3Lock);
    711              */  //edit 2014.06.19 屏蔽该段代码，将查询发送改为中断发送
    712          
    713              //edit 2014.06.19 BT数据通过中断方式发送//add by xxw 20140730
    714              for(i = 0; i < length; i++)
   \                     ??BSP_SerSendData_4:
   \   00000178   0x2000             MOVS     R0,#+0
   \   0000017A   0x4683             MOV      R11,R0
   \                     ??BSP_SerSendData_22:
   \   0000017C   0xF8BD 0x0010      LDRH     R0,[SP, #+16]
   \   00000180   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   00000184   0x4583             CMP      R11,R0
   \   00000186   0xD255             BCS.N    ??BSP_SerSendData_23
    715              {
    716                while(1)
    717                {
    718                  if((COUNT_bt ++) > 65535)
   \                     ??BSP_SerSendData_24:
   \   00000188   0x4640             MOV      R0,R8
   \   0000018A   0xF110 0x0801      ADDS     R8,R0,#+1
   \   0000018E   0xF5B0 0x3F80      CMP      R0,#+65536
   \   00000192   0xD303             BCC.N    ??BSP_SerSendData_25
    719                  {
    720                    CmcCommandEmpty_bt = TRUE;
   \   00000194   0x....             LDR.N    R0,??DataTable11_27
   \   00000196   0x2101             MOVS     R1,#+1
   \   00000198   0x6001             STR      R1,[R0, #+0]
    721                    break;
   \   0000019A   0xE011             B.N      ??BSP_SerSendData_26
    722                  }
    723                  nReadyForSend_bt = wpSendToReceiverIn_bt - wpSendToReceiverOut_bt;
   \                     ??BSP_SerSendData_25:
   \   0000019C   0x....             LDR.N    R0,??DataTable11_26
   \   0000019E   0x8800             LDRH     R0,[R0, #+0]
   \   000001A0   0x....             LDR.N    R1,??DataTable11_25
   \   000001A2   0x8809             LDRH     R1,[R1, #+0]
   \   000001A4   0x1A40             SUBS     R0,R0,R1
   \   000001A6   0x0007             MOVS     R7,R0
    724                  while(nReadyForSend_bt >= BUFFNUM1) nReadyForSend_bt += BUFFNUM1;	
   \                     ??BSP_SerSendData_27:
   \   000001A8   0xB2BF             UXTH     R7,R7            ;; ZeroExt  R7,R7,#+16,#+16
   \   000001AA   0xF5B7 0x6F80      CMP      R7,#+1024
   \   000001AE   0xDB02             BLT.N    ??BSP_SerSendData_28
   \   000001B0   0xF517 0x6780      ADDS     R7,R7,#+1024
   \   000001B4   0xE7F8             B.N      ??BSP_SerSendData_27
    725                  if(nReadyForSend_bt < (BUFFNUM1 - 1))
   \                     ??BSP_SerSendData_28:
   \   000001B6   0xB2BF             UXTH     R7,R7            ;; ZeroExt  R7,R7,#+16,#+16
   \   000001B8   0xF240 0x30FF      MOVW     R0,#+1023
   \   000001BC   0x4287             CMP      R7,R0
   \   000001BE   0xDAE3             BGE.N    ??BSP_SerSendData_24
    726                    break;
    727                }
    728                COUNT_bt = 0;
   \                     ??BSP_SerSendData_26:
   \   000001C0   0x2000             MOVS     R0,#+0
   \   000001C2   0x4680             MOV      R8,R0
    729                bSendBufferForReceiver_bt[wpSendToReceiverIn_bt] = *(p + i);
   \   000001C4   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   000001C8   0xF81B 0x0004      LDRB     R0,[R11, R4]
   \   000001CC   0x....             LDR.N    R1,??DataTable11_26
   \   000001CE   0x8809             LDRH     R1,[R1, #+0]
   \   000001D0   0x....             LDR.N    R2,??DataTable11_29
   \   000001D2   0x5488             STRB     R0,[R1, R2]
    730                wpSendToReceiverIn_bt++;
   \   000001D4   0x....             LDR.N    R0,??DataTable11_26
   \   000001D6   0x8800             LDRH     R0,[R0, #+0]
   \   000001D8   0x1C40             ADDS     R0,R0,#+1
   \   000001DA   0x....             LDR.N    R1,??DataTable11_26
   \   000001DC   0x8008             STRH     R0,[R1, #+0]
    731                wpSendToReceiverIn_bt %= BUFFNUM1;
   \   000001DE   0x....             LDR.N    R0,??DataTable11_26
   \   000001E0   0x8800             LDRH     R0,[R0, #+0]
   \   000001E2   0xF44F 0x6180      MOV      R1,#+1024
   \   000001E6   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000001EA   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000001EE   0x....             LDR.N    R0,??DataTable11_26
   \   000001F0   0x8002             STRH     R2,[R0, #+0]
    732                if(CmcCommandEmpty_bt)
   \   000001F2   0x....             LDR.N    R0,??DataTable11_27
   \   000001F4   0x6800             LDR      R0,[R0, #+0]
   \   000001F6   0x2800             CMP      R0,#+0
   \   000001F8   0xD019             BEQ.N    ??BSP_SerSendData_29
    733                {
    734                  CmcCommandEmpty_bt = FALSE;
   \   000001FA   0x....             LDR.N    R0,??DataTable11_27
   \   000001FC   0x2100             MOVS     R1,#+0
   \   000001FE   0x6001             STR      R1,[R0, #+0]
    735                  LPC_UART3->THR = *p;
   \   00000200   0x....             LDR.N    R0,??DataTable11_28  ;; 0x4009c000
   \   00000202   0x7821             LDRB     R1,[R4, #+0]
   \   00000204   0x7001             STRB     R1,[R0, #+0]
    736                  wpSendToReceiverOut_bt++;
   \   00000206   0x....             LDR.N    R0,??DataTable11_25
   \   00000208   0x8800             LDRH     R0,[R0, #+0]
   \   0000020A   0x1C40             ADDS     R0,R0,#+1
   \   0000020C   0x....             LDR.N    R1,??DataTable11_25
   \   0000020E   0x8008             STRH     R0,[R1, #+0]
    737                  wpSendToReceiverOut_bt %= BUFFNUM1;
   \   00000210   0x....             LDR.N    R0,??DataTable11_25
   \   00000212   0x8800             LDRH     R0,[R0, #+0]
   \   00000214   0xF44F 0x6180      MOV      R1,#+1024
   \   00000218   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   0000021C   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   00000220   0x....             LDR.N    R0,??DataTable11_25
   \   00000222   0x8002             STRH     R2,[R0, #+0]
    738                  UART_IntConfig(LPC_UART3, UART_INTCFG_THRE, ENABLE);
   \   00000224   0x2201             MOVS     R2,#+1
   \   00000226   0x2101             MOVS     R1,#+1
   \   00000228   0x....             LDR.N    R0,??DataTable11_28  ;; 0x4009c000
   \   0000022A   0x.... 0x....      BL       UART_IntConfig
    739                  //LPC_UART3->IER |= UART_IER_THREINT_EN;   //使能发送中断 for test
    740                }
    741              }
   \                     ??BSP_SerSendData_29:
   \   0000022E   0xF11B 0x0B01      ADDS     R11,R11,#+1
   \   00000232   0xE7A3             B.N      ??BSP_SerSendData_22
    742              break;
   \                     ??BSP_SerSendData_23:
   \   00000234   0xE060             B.N      ??BSP_SerSendData_9
    743              /*********************2011-10-31 XULIANG*****************/
    744            case 4:
    745              for(i = 0; i < length; i++)
   \                     ??BSP_SerSendData_3:
   \   00000236   0x2000             MOVS     R0,#+0
   \   00000238   0x4683             MOV      R11,R0
   \                     ??BSP_SerSendData_30:
   \   0000023A   0xF8BD 0x0010      LDRH     R0,[SP, #+16]
   \   0000023E   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   00000242   0x4583             CMP      R11,R0
   \   00000244   0xD257             BCS.N    ??BSP_SerSendData_31
    746              {
    747                //查询发送
    748                //while( !(LPC_UART0->LSR & UART_LSR_THRE) );	//While THR is NOT empty, wait!
    749                //LPC_UART0->THR = *(p + i);			//Load new data	
    750                while(1){
    751                  if((COUNT_radio ++) > 65535)
   \                     ??BSP_SerSendData_32:
   \   00000246   0x4650             MOV      R0,R10
   \   00000248   0xF110 0x0A01      ADDS     R10,R0,#+1
   \   0000024C   0xF5B0 0x3F80      CMP      R0,#+65536
   \   00000250   0xD303             BCC.N    ??BSP_SerSendData_33
    752                  {
    753                    //BSP_SerInit(0,rate_current);
    754                    CmcCommandEmpty_radio = TRUE;
   \   00000252   0x....             LDR.N    R0,??DataTable11_35
   \   00000254   0x2101             MOVS     R1,#+1
   \   00000256   0x6001             STR      R1,[R0, #+0]
    755                    break;
   \   00000258   0xE013             B.N      ??BSP_SerSendData_34
    756                  }
    757                  nReadyForSend_radio = wpSendToReceiverIn_radio - wpSendToReceiverOut_radio;
   \                     ??BSP_SerSendData_33:
   \   0000025A   0x....             LDR.N    R0,??DataTable11_34
   \   0000025C   0x8800             LDRH     R0,[R0, #+0]
   \   0000025E   0x....             LDR.N    R1,??DataTable11_33
   \   00000260   0x8809             LDRH     R1,[R1, #+0]
   \   00000262   0x1A40             SUBS     R0,R0,R1
   \   00000264   0x4681             MOV      R9,R0
    758                  while(nReadyForSend_radio >= BUFFNUM1) nReadyForSend_radio += BUFFNUM1;	
   \                     ??BSP_SerSendData_35:
   \   00000266   0xFA1F 0xF989      UXTH     R9,R9            ;; ZeroExt  R9,R9,#+16,#+16
   \   0000026A   0xF5B9 0x6F80      CMP      R9,#+1024
   \   0000026E   0xDB02             BLT.N    ??BSP_SerSendData_36
   \   00000270   0xF519 0x6980      ADDS     R9,R9,#+1024
   \   00000274   0xE7F7             B.N      ??BSP_SerSendData_35
    759                  //nReadyForSend %= BUFFNUM1;   	// 这行代码错误，可能导致软件死机
    760                  if(nReadyForSend_radio < (BUFFNUM1 - 1)) // Wait for send out at least one byte!	(BUFFNUM0 - 1) wangjiejun 2010-06-07
   \                     ??BSP_SerSendData_36:
   \   00000276   0xFA1F 0xF989      UXTH     R9,R9            ;; ZeroExt  R9,R9,#+16,#+16
   \   0000027A   0xF240 0x30FF      MOVW     R0,#+1023
   \   0000027E   0x4581             CMP      R9,R0
   \   00000280   0xDAE1             BGE.N    ??BSP_SerSendData_32
    761                    break;
    762                }
    763                COUNT_radio = 0;
   \                     ??BSP_SerSendData_34:
   \   00000282   0x2000             MOVS     R0,#+0
   \   00000284   0x4682             MOV      R10,R0
    764                bSendBufferForReceiver_radio[wpSendToReceiverIn_radio] = *(p + i);
   \   00000286   0xFA1F 0xFB8B      UXTH     R11,R11          ;; ZeroExt  R11,R11,#+16,#+16
   \   0000028A   0xF81B 0x0004      LDRB     R0,[R11, R4]
   \   0000028E   0x....             LDR.N    R1,??DataTable11_34
   \   00000290   0x8809             LDRH     R1,[R1, #+0]
   \   00000292   0x....             LDR.N    R2,??DataTable11_37
   \   00000294   0x5488             STRB     R0,[R1, R2]
    765                wpSendToReceiverIn_radio++;
   \   00000296   0x....             LDR.N    R0,??DataTable11_34
   \   00000298   0x8800             LDRH     R0,[R0, #+0]
   \   0000029A   0x1C40             ADDS     R0,R0,#+1
   \   0000029C   0x....             LDR.N    R1,??DataTable11_34
   \   0000029E   0x8008             STRH     R0,[R1, #+0]
    766                wpSendToReceiverIn_radio %= BUFFNUM1;
   \   000002A0   0x....             LDR.N    R0,??DataTable11_34
   \   000002A2   0x8800             LDRH     R0,[R0, #+0]
   \   000002A4   0xF44F 0x6180      MOV      R1,#+1024
   \   000002A8   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000002AC   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000002B0   0x....             LDR.N    R0,??DataTable11_34
   \   000002B2   0x8002             STRH     R2,[R0, #+0]
    767                if(CmcCommandEmpty_radio){
   \   000002B4   0x....             LDR.N    R0,??DataTable11_35
   \   000002B6   0x6800             LDR      R0,[R0, #+0]
   \   000002B8   0x2800             CMP      R0,#+0
   \   000002BA   0xD019             BEQ.N    ??BSP_SerSendData_37
    768          
    769                  CmcCommandEmpty_radio = FALSE;
   \   000002BC   0x....             LDR.N    R0,??DataTable11_35
   \   000002BE   0x2100             MOVS     R1,#+0
   \   000002C0   0x6001             STR      R1,[R0, #+0]
    770                  LPC_UART4->THR = *p;
   \   000002C2   0x7820             LDRB     R0,[R4, #+0]
   \   000002C4   0x....             LDR.N    R1,??DataTable11_36  ;; 0x400a4000
   \   000002C6   0x6008             STR      R0,[R1, #+0]
    771                  //OS_ENTER_CRITICAL();
    772                  wpSendToReceiverOut_radio++;
   \   000002C8   0x....             LDR.N    R0,??DataTable11_33
   \   000002CA   0x8800             LDRH     R0,[R0, #+0]
   \   000002CC   0x1C40             ADDS     R0,R0,#+1
   \   000002CE   0x....             LDR.N    R1,??DataTable11_33
   \   000002D0   0x8008             STRH     R0,[R1, #+0]
    773                  //OS_EXIT_CRITICAL();
    774                  wpSendToReceiverOut_radio %= BUFFNUM1;
   \   000002D2   0x....             LDR.N    R0,??DataTable11_33
   \   000002D4   0x8800             LDRH     R0,[R0, #+0]
   \   000002D6   0xF44F 0x6180      MOV      R1,#+1024
   \   000002DA   0xFB90 0xF2F1      SDIV     R2,R0,R1
   \   000002DE   0xFB02 0x0211      MLS      R2,R2,R1,R0
   \   000002E2   0x....             LDR.N    R0,??DataTable11_33
   \   000002E4   0x8002             STRH     R2,[R0, #+0]
    775                  UART4_IntConfig(LPC_UART4, UART_INTCFG_THRE, ENABLE);
   \   000002E6   0x2201             MOVS     R2,#+1
   \   000002E8   0x2101             MOVS     R1,#+1
   \   000002EA   0x....             LDR.N    R0,??DataTable11_36  ;; 0x400a4000
   \   000002EC   0x.... 0x....      BL       UART4_IntConfig
    776                }
    777              }
   \                     ??BSP_SerSendData_37:
   \   000002F0   0xF11B 0x0B01      ADDS     R11,R11,#+1
   \   000002F4   0xE7A1             B.N      ??BSP_SerSendData_30
    778              break;
   \                     ??BSP_SerSendData_31:
   \   000002F6   0xE7FF             B.N      ??BSP_SerSendData_9
    779              /*********************2011-10-31 XULIANG*****************/
    780            default:
    781              break;
    782            }
    783          }
   \                     ??BSP_SerSendData_5:
   \                     ??BSP_SerSendData_9:
   \   000002F8   0xB005             ADD      SP,SP,#+20
   \   000002FA   0xE8BD 0x8FF0      POP      {R4-R11,PC}      ;; return

   \                                 In section .text, align 2, keep-with-next
    784          int my_putchar(uint8_t ch)//add by xxw 20140820 实现print功能
    785          {
    786            while( !(LPC_UART0->LSR & UART_LSR_THRE) );	//While THR is NOT empty, wait!
   \                     my_putchar:
   \                     ??my_putchar_0:
   \   00000000   0x....             LDR.N    R1,??DataTable11_10  ;; 0x4000c014
   \   00000002   0x7809             LDRB     R1,[R1, #+0]
   \   00000004   0x0689             LSLS     R1,R1,#+26
   \   00000006   0xD5FB             BPL.N    ??my_putchar_0
    787            LPC_UART0->THR = (uint8_t)ch;			//Load new data	
   \   00000008   0x....             LDR.N    R1,??DataTable11_7  ;; 0x4000c000
   \   0000000A   0x7008             STRB     R0,[R1, #+0]
    788            return ch;
   \   0000000C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000E   0x4770             BX       LR               ;; return
    789          }

   \                                 In section .text, align 2, keep-with-next
    790          int fputc(int ch,FILE *f)//add by xxw 20140820 实现print功能
    791          {
    792            while( !(LPC_UART0->LSR & UART_LSR_THRE) );	//While THR is NOT empty, wait!
   \                     fputc:
   \                     ??fputc_0:
   \   00000000   0x....             LDR.N    R2,??DataTable11_10  ;; 0x4000c014
   \   00000002   0x7812             LDRB     R2,[R2, #+0]
   \   00000004   0x0692             LSLS     R2,R2,#+26
   \   00000006   0xD5FB             BPL.N    ??fputc_0
    793            LPC_UART0->THR = (uint8_t)ch;			//Load new data	
   \   00000008   0x....             LDR.N    R2,??DataTable11_7  ;; 0x4000c000
   \   0000000A   0x7010             STRB     R0,[R2, #+0]
    794            return ch;
   \   0000000C   0x4770             BX       LR               ;; return
    795          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   0xE000E100         DC32     0xe000e100

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_1:
   \   00000000   0xE000ED18         DC32     0xe000ed18

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_2:
   \   00000000   0xE000E400         DC32     0xe000e400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_3:
   \   00000000   0x4000C008         DC32     0x4000c008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_4:
   \   00000000   0x........         DC32     wpSendToReceiverOut

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_5:
   \   00000000   0x........         DC32     wpSendToReceiverIn

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_6:
   \   00000000   0x........         DC32     CmcCommandEmpty

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_7:
   \   00000000   0x4000C000         DC32     0x4000c000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_8:
   \   00000000   0x........         DC32     bSendBufferForReceiver

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_9:
   \   00000000   0x........         DC32     g_DeviceCOM

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_10:
   \   00000000   0x4000C014         DC32     0x4000c014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_11:
   \   00000000   0x40010008         DC32     0x40010008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_12:
   \   00000000   0x........         DC32     Module_Data_WrSp

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_13:
   \   00000000   0x........         DC32     Module_Data_Buffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_14:
   \   00000000   0x40010000         DC32     0x40010000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_15:
   \   00000000   0x40010014         DC32     0x40010014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_16:
   \   00000000   0x40098008         DC32     0x40098008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_17:
   \   00000000   0x........         DC32     wpSendToReceiverOut_gps

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_18:
   \   00000000   0x........         DC32     wpSendToReceiverIn_gps

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_19:
   \   00000000   0x........         DC32     CmcCommandEmpty_gps

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_20:
   \   00000000   0x40098000         DC32     0x40098000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_21:
   \   00000000   0x........         DC32     bSendBufferForReceiver_gps

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_22:
   \   00000000   0x........         DC32     g_DeviceGPS

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_23:
   \   00000000   0x40098014         DC32     0x40098014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_24:
   \   00000000   0x4009C008         DC32     0x4009c008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_25:
   \   00000000   0x........         DC32     wpSendToReceiverOut_bt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_26:
   \   00000000   0x........         DC32     wpSendToReceiverIn_bt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_27:
   \   00000000   0x........         DC32     CmcCommandEmpty_bt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_28:
   \   00000000   0x4009C000         DC32     0x4009c000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_29:
   \   00000000   0x........         DC32     bSendBufferForReceiver_bt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_30:
   \   00000000   0x........         DC32     g_DeviceBT

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_31:
   \   00000000   0x4009C014         DC32     0x4009c014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_32:
   \   00000000   0x400A4008         DC32     0x400a4008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_33:
   \   00000000   0x........         DC32     wpSendToReceiverOut_radio

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_34:
   \   00000000   0x........         DC32     wpSendToReceiverIn_radio

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_35:
   \   00000000   0x........         DC32     CmcCommandEmpty_radio

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_36:
   \   00000000   0x400A4000         DC32     0x400a4000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_37:
   \   00000000   0x........         DC32     bSendBufferForReceiver_radio

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_38:
   \   00000000   0x........         DC32     Radio_Data_Len

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_39:
   \   00000000   0x........         DC32     Radio_Data_Process_Buffer

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_40:
   \   00000000   0x400AC014         DC32     0x400ac014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_41:
   \   00000000   0x........         DC32     BSP_Ser0Lock

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_42:
   \   00000000   0x........         DC32     BSP_Ser1Lock

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_43:
   \   00000000   0x4001000C         DC32     0x4001000c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_44:
   \   00000000   0x40010004         DC32     0x40010004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_45:
   \   00000000   0x40010028         DC32     0x40010028

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_46:
   \   00000000   0x........         DC32     BSP_Ser2Lock

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_47:
   \   00000000   0x........         DC32     BSP_Ser3Lock

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_48:
   \   00000000   0x........         DC32     `?<Constant "Serial0 Tx Wait">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_49:
   \   00000000   0x........         DC32     BSP_Ser0TxWait

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_50:
   \   00000000   0x........         DC32     `?<Constant "Serial0 Lock">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_51:
   \   00000000   0x........         DC32     `?<Constant "Serial1 Lock">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_52:
   \   00000000   0x........         DC32     `?<Constant "Serial2 Lock">`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_53:
   \   00000000   0x........         DC32     `?<Constant "Serial3 Lock">`

   \                                 In section .rodata, align 4
   \                     `?<Constant "Serial0 Tx Wait">`:
   \   00000000   0x53 0x65          DC8 "Serial0 Tx Wait"
   \              0x72 0x69    
   \              0x61 0x6C    
   \              0x30 0x20    
   \              0x54 0x78    
   \              0x20 0x57    
   \              0x61 0x69    
   \              0x74 0x00    

   \                                 In section .rodata, align 4
   \                     `?<Constant "Serial0 Lock">`:
   \   00000000   0x53 0x65          DC8 "Serial0 Lock"
   \              0x72 0x69    
   \              0x61 0x6C    
   \              0x30 0x20    
   \              0x4C 0x6F    
   \              0x63 0x6B    
   \              0x00         
   \   0000000D   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   \                                 In section .rodata, align 4
   \                     `?<Constant "Serial1 Lock">`:
   \   00000000   0x53 0x65          DC8 "Serial1 Lock"
   \              0x72 0x69    
   \              0x61 0x6C    
   \              0x31 0x20    
   \              0x4C 0x6F    
   \              0x63 0x6B    
   \              0x00         
   \   0000000D   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   \                                 In section .rodata, align 4
   \                     `?<Constant "Serial2 Lock">`:
   \   00000000   0x53 0x65          DC8 "Serial2 Lock"
   \              0x72 0x69    
   \              0x61 0x6C    
   \              0x32 0x20    
   \              0x4C 0x6F    
   \              0x63 0x6B    
   \              0x00         
   \   0000000D   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   \                                 In section .rodata, align 4
   \                     `?<Constant "Serial3 Lock">`:
   \   00000000   0x53 0x65          DC8 "Serial3 Lock"
   \              0x72 0x69    
   \              0x61 0x6C    
   \              0x33 0x20    
   \              0x4C 0x6F    
   \              0x63 0x6B    
   \              0x00         
   \   0000000D   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      40   BSP_SerInit
        40   -> BSP_OS_SemPost
        40   -> BSP_OS_SemWait
        40   -> CLKPWR_ConfigPPWR
        40   -> CLKPWR_GetCLK
        40   -> NVIC_EnableIRQ
        40   -> NVIC_SetPriority
        40   -> PINSEL_ConfigPin
        40   -> UART4_Init
        40   -> UART4_IntConfig
        40   -> UART4_TxCmd
        40   -> UART_ConfigStructInit
        40   -> UART_FIFOConfig
        40   -> UART_FIFOConfigStructInit
        40   -> UART_Init
        40   -> UART_IntConfig
        40   -> UART_TxCmd
       8   BSP_SerInitSem
         8   -> BSP_OS_SemCreate
      56   BSP_SerSendData
        56   -> BSP_OS_SemPost
        56   -> BSP_OS_SemWait
        56   -> UART4_IntConfig
        56   -> UART_IntConfig
       4   NVIC_EnableIRQ
       0   NVIC_SetPriority
       8   UART0_IRQHandler
         8   -> UART_IntConfig
       0   UART1_IRQHandler
       8   UART2_IRQHandler
         8   -> UART_IntConfig
       8   UART3_IRQHandler
         8   -> UART_IntConfig
       8   UART4_IRQHandler
         8   -> UART4_IntConfig
       0   fputc
       0   hard_fault_handler_c
       0   my_putchar


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      16  ?<Constant "Serial0 Lock">
      16  ?<Constant "Serial0 Tx Wait">
      16  ?<Constant "Serial1 Lock">
      16  ?<Constant "Serial2 Lock">
      16  ?<Constant "Serial3 Lock">
       4  ??DataTable11
       4  ??DataTable11_1
       4  ??DataTable11_10
       4  ??DataTable11_11
       4  ??DataTable11_12
       4  ??DataTable11_13
       4  ??DataTable11_14
       4  ??DataTable11_15
       4  ??DataTable11_16
       4  ??DataTable11_17
       4  ??DataTable11_18
       4  ??DataTable11_19
       4  ??DataTable11_2
       4  ??DataTable11_20
       4  ??DataTable11_21
       4  ??DataTable11_22
       4  ??DataTable11_23
       4  ??DataTable11_24
       4  ??DataTable11_25
       4  ??DataTable11_26
       4  ??DataTable11_27
       4  ??DataTable11_28
       4  ??DataTable11_29
       4  ??DataTable11_3
       4  ??DataTable11_30
       4  ??DataTable11_31
       4  ??DataTable11_32
       4  ??DataTable11_33
       4  ??DataTable11_34
       4  ??DataTable11_35
       4  ??DataTable11_36
       4  ??DataTable11_37
       4  ??DataTable11_38
       4  ??DataTable11_39
       4  ??DataTable11_4
       4  ??DataTable11_40
       4  ??DataTable11_41
       4  ??DataTable11_42
       4  ??DataTable11_43
       4  ??DataTable11_44
       4  ??DataTable11_45
       4  ??DataTable11_46
       4  ??DataTable11_47
       4  ??DataTable11_48
       4  ??DataTable11_49
       4  ??DataTable11_5
       4  ??DataTable11_50
       4  ??DataTable11_51
       4  ??DataTable11_52
       4  ??DataTable11_53
       4  ??DataTable11_6
       4  ??DataTable11_7
       4  ??DataTable11_8
       4  ??DataTable11_9
       4  BSP_Ser0Lock
       4  BSP_Ser0TxWait
       4  BSP_Ser1Lock
       4  BSP_Ser2Lock
       4  BSP_Ser3Lock
     682  BSP_SerInit
      74  BSP_SerInitSem
     766  BSP_SerSendData
       4  CmcCommandEmpty
       4  CmcCommandEmpty_bt
       4  CmcCommandEmpty_gps
       4  CmcCommandEmpty_radio
      26  NVIC_EnableIRQ
      38  NVIC_SetPriority
     220  UART0_IRQHandler
     122  UART1_IRQHandler
     220  UART2_IRQHandler
     220  UART3_IRQHandler
     218  UART4_IRQHandler
    1024  bSendBufferForReceiver
    1024  bSendBufferForReceiver_bt
    1024  bSendBufferForReceiver_gps
    1024  bSendBufferForReceiver_radio
      14  fputc
       4  hard_enter
       2  hard_fault_handler_c
      16  my_putchar
       1  task_current
       2  wpSendToReceiverIn
       2  wpSendToReceiverIn_bt
       2  wpSendToReceiverIn_gps
       2  wpSendToReceiverIn_radio
       2  wpSendToReceiverOut
       2  wpSendToReceiverOut_bt
       2  wpSendToReceiverOut_gps
       2  wpSendToReceiverOut_radio

 
 4 137 bytes in section .bss
    16 bytes in section .data
    80 bytes in section .rodata
 2 834 bytes in section .text
 
 2 834 bytes of CODE  memory
    80 bytes of CONST memory
 4 153 bytes of DATA  memory

Errors: none
Warnings: 3
